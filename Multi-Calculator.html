<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Function Calculator</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* Apply Inter font and basic styling */
        body {
            font-family: "Inter", sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Custom styles for deviation table */
        .deviation-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        .deviation-table th, .deviation-table td {
            border: 1px solid #e2e8f0; /* Tailwind gray-200 */
            padding: 8px;
            text-align: left;
        }
        .deviation-table thead {
            background-color: #c7d2fe; /* indigo-200 */
        }
        .deviation-table th {
            font-weight: 600;
            color: #312e81; /* indigo-900 */
        }
        .deviation-table td {
            background-color: #ffffff;
            color: #4a5568; /* Tailwind gray-700 */
        }
        .deviation-table tr:nth-child(even) {
            background-color: #e0e7ff; /* indigo-100 */
        }
        /* Specific styling for error messages in result boxes */
        .error {
            border-color: #ef4444 !important; /* Red-500 */
            background-color: #fee2e2 !important; /* Red-100 */
            color: #dc2626 !important; /* Red-600 */
        }
        .word-break-break-all {
            word-break: break-all;
        }
    </style>
</head>
<body>
    <div class="flex flex-col items-center min-h-screen p-5 bg-f0f4f8 font-inter">
        <div class="bg-white p-8 rounded-3xl shadow-2xl max-w-xl w-full flex flex-col items-center border-4 border-slate-400">
            <!-- Display -->
            <div class="mb-4 w-full">
                <input type="text" id="display" placeholder="0" 
                    class="w-full text-right bg-blue-50 text-blue-900 text-4xl p-4 rounded-xl border-2 border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-inner min-h-[80px] box-border">
            </div>

            <!-- Main Calculator Buttons -->
            <div class="grid grid-cols-4 gap-3 w-full mb-4">
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-red-300 bg-red-200 text-red-800 hover:bg-red-300 active:bg-red-400 active:shadow-inner" id="clear-btn">AC</button>
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-green-300 bg-green-200 text-green-800 hover:bg-green-300 active:bg-green-400 active:shadow-inner" id="bksp-btn">BKSP</button>
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-green-300 bg-green-200 text-green-800 hover:bg-green-300 active:bg-green-400 active:shadow-inner" id="toggle-sign-btn">+/-</button>
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-purple-300 bg-purple-200 text-purple-800 hover:bg-purple-300 active:bg-purple-400 active:shadow-inner" id="divide-btn">÷</button>

                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-blue-200 bg-blue-100 text-blue-800 hover:bg-blue-200 active:bg-blue-300 active:shadow-inner" id="seven-btn">7</button>
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-blue-200 bg-blue-100 text-blue-800 hover:bg-blue-200 active:bg-blue-300 active:shadow-inner" id="eight-btn">8</button>
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-blue-200 bg-blue-100 text-blue-800 hover:bg-blue-200 active:bg-blue-300 active:shadow-inner" id="nine-btn">9</button>
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-purple-300 bg-purple-200 text-purple-800 hover:bg-purple-300 active:bg-purple-400 active:shadow-inner" id="multiply-btn">×</button>

                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-blue-200 bg-blue-100 text-blue-800 hover:bg-blue-200 active:bg-blue-300 active:shadow-inner" id="four-btn">4</button>
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-blue-200 bg-blue-100 text-blue-800 hover:bg-blue-200 active:bg-blue-300 active:shadow-inner" id="five-btn">5</button>
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-blue-200 bg-blue-100 text-blue-800 hover:bg-blue-200 active:bg-blue-300 active:shadow-inner" id="six-btn">6</button>
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-purple-300 bg-purple-200 text-purple-800 hover:bg-purple-300 active:bg-purple-400 active:shadow-inner" id="subtract-btn">-</button>

                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-blue-200 bg-blue-100 text-blue-800 hover:bg-blue-200 active:bg-blue-300 active:shadow-inner" id="one-btn">1</button>
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-blue-200 bg-blue-100 text-blue-800 hover:bg-blue-200 active:bg-blue-300 active:shadow-inner" id="two-btn">2</button>
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-blue-200 bg-blue-100 text-blue-800 hover:bg-blue-200 active:bg-blue-300 active:shadow-inner" id="three-btn">3</button>
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-purple-300 bg-purple-200 text-purple-800 hover:bg-purple-300 active:bg-purple-400 active:shadow-inner" id="add-btn">+</button>

                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-blue-200 bg-blue-100 text-blue-800 hover:bg-blue-200 active:bg-blue-300 active:shadow-inner col-span-1" id="zero-btn">0</button>
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-blue-200 bg-blue-100 text-blue-800 hover:bg-blue-200 active:bg-blue-300 active:shadow-inner" id="decimal-btn">.</button>
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-green-300 bg-green-200 text-green-800 hover:bg-green-300 active:bg-green-400 active:shadow-inner" id="pi-btn">π</button>
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer border border-green-300 bg-green-200 text-green-800 hover:bg-green-300 active:bg-green-400 active:shadow-inner" id="exponent-btn">xʸ</button>
                
                <button class="p-4 text-xl font-semibold rounded-xl transition-all duration-200 ease-in-out shadow-md min-w-[60px] min-h-[60px] flex justify-center items-center select-none cursor-pointer col-span-2 bg-blue-600 text-white border-blue-700 hover:bg-blue-700 active:bg-blue-800 active:shadow-inner" id="equals-btn">=</button>
            </div>

            <!-- Percent Equations Menu -->
            <div class="w-full mt-6 p-5 rounded-2xl shadow-xl border-2 bg-teal-50 border-teal-200" id="percentMenuContainer">
                <div class="menu-header text-xl font-bold p-3 rounded-lg cursor-pointer flex justify-between items-center mb-4 border-2 transition-colors duration-200 bg-teal-300 text-teal-900 border-teal-500 hover:bg-teal-400" id="percent-menu-header">
                    Percent Equations <span id="percentToggleArrow">▶</span>
                </div>
                <div id="percentMenu" class="menu-content hidden grid gap-4 overflow-y-auto max-h-[750px] p-2 pb-12">
                    <div class="menu-section bg-white p-5 rounded-xl border-2 border-teal-100">
                        <h3 class="font-medium text-teal-600 mb-2">Find a Percent of X</h3>
                        <label for="percentP1" class="block text-sm font-medium text-gray-700 mb-1">Percent (P):</label>
                        <input type="number" id="percentP1" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 20">
                        <label for="percentX1" class="block text-sm font-medium text-gray-700 mb-1">Of X:</label>
                        <input type="number" id="percentX1" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 100">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="calc-percent1-btn">Calculate</button>
                        <div id="resultPercent1" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-teal-400 text-teal-950 border-teal-700"></div>
                    </div>
                    <div class="menu-section bg-white p-5 rounded-xl border-2 border-teal-100">
                        <h3 class="font-medium text-teal-600 mb-2">What Percent of N is X?</h3>
                        <label for="percentX2" class="block text-sm font-medium text-gray-700 mb-1">X:</label>
                        <input type="number" id="percentX2" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 20">
                        <label for="percentN2" class="block text-sm font-medium text-gray-700 mb-1">Of N:</label>
                        <input type="number" id="percentN2" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 100">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="calc-percent2-btn">Calculate</button>
                        <div id="resultPercent2" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-teal-400 text-teal-950 border-teal-700"></div>
                    </div>
                    <div class="menu-section bg-white p-5 rounded-xl border-2 border-teal-100">
                        <h3 class="font-medium text-teal-600 mb-2">If X is P% of What Number?</h3>
                        <label for="percentX3" class="block text-sm font-medium text-gray-700 mb-1">X:</label>
                        <input type="number" id="percentX3" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 20">
                        <label for="percentP3" class="block text-sm font-medium text-gray-700 mb-1">Percent (P):</label>
                        <input type="number" id="percentP3" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 20">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="calc-percent3-btn">Calculate</button>
                        <div id="resultPercent3" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-teal-400 text-teal-950 border-teal-700"></div>
                    </div>
                    <button class="menu-button-secondary mt-3 px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 active:bg-gray-500 transition-colors duration-200 shadow-md border border-gray-400 cursor-pointer w-full" id="reset-percent-btn">Reset Percent Equations</button>
                </div>
            </div>

            <!-- Fraction Calculator Menu -->
            <div class="w-full mt-6 p-5 rounded-2xl shadow-xl border-2 bg-emerald-50 border-emerald-200" id="fractionMenuContainer">
                <div class="menu-header text-xl font-bold p-3 rounded-lg cursor-pointer flex justify-between items-center mb-4 border-2 transition-colors duration-200 bg-emerald-300 text-emerald-900 border-emerald-500 hover:bg-emerald-400" id="fraction-menu-header">
                    Fraction Calculator <span id="fractionToggleArrow">▶</span>
                </div>
                <div id="fractionMenu" class="menu-content hidden grid gap-4 overflow-y-auto max-h-[750px] p-2 pb-12">
                    <div class="menu-section bg-white p-5 rounded-xl border-2 border-emerald-100">
                        <h3 class="font-medium text-emerald-600 mb-2">Fraction 1</h3>
                        <div class="fraction-input-group grid grid-cols-3 gap-2 items-end">
                            <div>
                                <label for="f1_whole" class="block text-sm font-medium text-gray-700 mb-1">Whole</label>
                                <input type="number" id="f1_whole" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-center" placeholder="0">
                            </div>
                            <div class="text-2xl text-gray-400 font-extrabold flex flex-col justify-center items-center h-full">
                                <span class="flex-grow"></span>
                                <span>/</span>
                                <span class="flex-grow"></span>
                            </div>
                            <div>
                                <label for="f1_numerator" class="block text-sm font-medium text-gray-700 mb-1">Numerator</label>
                                <input type="number" id="f1_numerator" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-center" placeholder="1">
                            </div>
                            <div></div>
                            <div>
                                <label for="f1_denominator" class="block text-sm font-medium text-gray-700 mb-1">Denominator</label>
                                <input type="number" id="f1_denominator" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-center" placeholder="2">
                            </div>
                        </div>
                    </div>
                    <div class="menu-section bg-white p-5 rounded-xl border-2 border-emerald-100">
                        <h3 class="font-medium text-emerald-600 mb-2">Fraction 2</h3>
                        <div class="fraction-input-group grid grid-cols-3 gap-2 items-end">
                            <div>
                                <label for="f2_whole" class="block text-sm font-medium text-gray-700 mb-1">Whole</label>
                                <input type="number" id="f2_whole" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-center" placeholder="0">
                            </div>
                            <div class="text-2xl text-gray-400 font-extrabold flex flex-col justify-center items-center h-full">
                                <span class="flex-grow"></span>
                                <span>/</span>
                                <span class="flex-grow"></span>
                            </div>
                            <div>
                                <label for="f2_numerator" class="block text-sm font-medium text-gray-700 mb-1">Numerator</label>
                                <input type="number" id="f2_numerator" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-center" placeholder="3">
                            </div>
                            <div></div>
                            <div>
                                <label for="f2_denominator" class="block text-sm font-medium text-gray-700 mb-1">Denominator</label>
                                <input type="number" id="f2_denominator" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-center" placeholder="4">
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-2 mt-4">
                            <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="frac-add-btn">Add (+)</button>
                            <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="frac-subtract-btn">Subtract (-)</button>
                            <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="frac-multiply-btn">Multiply (x)</button>
                            <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="frac-divide-btn">Divide (÷)</button>
                        </div>
                        <div id="fractionResult" class="result mt-4 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-emerald-400 text-emerald-950 border-emerald-700"></div>
                    </div>
                    <button class="menu-button-secondary mt-3 px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 active:bg-gray-500 transition-colors duration-200 shadow-md border border-gray-400 cursor-pointer w-full" id="reset-fraction-btn">Reset Fraction Calculator</button>
                </div>
            </div>

            <!-- Geometric Formulas Menu -->
            <div class="w-full mt-6 p-5 rounded-2xl shadow-xl border-2 bg-rose-50 border-rose-200" id="geometryMenuContainer">
                <div class="menu-header text-xl font-bold p-3 rounded-lg cursor-pointer flex justify-between items-center mb-4 border-2 transition-colors duration-200 bg-rose-300 text-rose-900 border-rose-500 hover:bg-rose-400" id="geometry-menu-header">
                    Geometric Formulas <span id="geometryToggleArrow">▶</span>
                </div>
                <div id="geometryMenu" class="menu-content hidden grid gap-4 overflow-y-auto max-h-[750px] p-2 pb-12">
                    <button class="menu-button-secondary mt-3 px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 active:bg-gray-500 transition-colors duration-200 shadow-md border border-gray-400 cursor-pointer w-full mb-4" id="reset-geometry-btn">Reset All Geometry Fields</button>
                    <!-- Area Formulas -->
                    <div class="menu-section bg-white p-5 rounded-xl border-2 border-rose-100">
                        <h3 class="font-medium text-rose-600 mb-2">Area Formulas - Solver</h3>
                        <!-- Square -->
                        <h4 class="text-sm font-semibold mb-1">Square Area (A = s²)</h4>
                        <label for="squareArea_s" class="block text-sm font-medium text-gray-700 mb-1">Side (s):</label>
                        <input type="number" id="squareArea_s" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 5">
                        <label for="squareArea_A" class="block text-sm font-medium text-gray-700 mb-1">Area (A):</label>
                        <input type="number" id="squareArea_A" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 25">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="square-area-solver-btn">Calculate</button>
                        <div id="resultSquareAreaSolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                        <hr class="my-3 border-gray-200">
                        <!-- Rectangle -->
                        <h4 class="text-sm font-semibold mb-1">Rectangle Area (A = l x w)</h4>
                        <label for="rectArea_l" class="block text-sm font-medium text-gray-700 mb-1">Length (l):</label>
                        <input type="number" id="rectArea_l" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 10">
                        <label for="rectArea_w" class="block text-sm font-medium text-gray-700 mb-1">Width (w):</label>
                        <input type="number" id="rectArea_w" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 5">
                        <label for="rectArea_A" class="block text-sm font-medium text-gray-700 mb-1">Area (A):</label>
                        <input type="number" id="rectArea_A" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 50">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="rect-area-solver-btn">Calculate</button>
                        <div id="resultRectAreaSolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                        <hr class="my-3 border-gray-200">
                        <!-- Parallelogram -->
                        <h4 class="text-sm font-semibold mb-1">Parallelogram Area (A = b x h)</h4>
                        <label for="paraArea_b" class="block text-sm font-medium text-gray-700 mb-1">Base (b):</label>
                        <input type="number" id="paraArea_b" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 8">
                        <label for="paraArea_h" class="block text-sm font-medium text-gray-700 mb-1">Height (h):</label>
                        <input type="number" id="paraArea_h" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 4">
                        <label for="paraArea_A" class="block text-sm font-medium text-gray-700 mb-1">Area (A):</label>
                        <input type="number" id="paraArea_A" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 32">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="para-area-solver-btn">Calculate</button>
                        <div id="resultParaAreaSolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                        <hr class="my-3 border-gray-200">
                        <!-- Rhombus/Kite -->
                        <h4 class="text-sm font-semibold mb-1">Rhombus/Kite Area (A = 0.5 x d₁ x d₂)</h4>
                        <label for="rhombusArea_d1" class="block text-sm font-medium text-gray-700 mb-1">Diagonal 1 (d₁):</label>
                        <input type="number" id="rhombusArea_d1" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 6">
                        <label for="rhombusArea_d2" class="block text-sm font-medium text-gray-700 mb-1">Diagonal 2 (d₂):</label>
                        <input type="number" id="rhombusArea_d2" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 8">
                        <label for="rhombusArea_A" class="block text-sm font-medium text-gray-700 mb-1">Area (A):</label>
                        <input type="number" id="rhombusArea_A" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 24">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="rhombus-kite-area-solver-btn">Calculate</button>
                        <div id="resultRhombusKiteAreaSolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                        <hr class="my-3 border-gray-200">
                        <!-- Trapezoid -->
                        <h4 class="text-sm font-semibold mb-1">Trapezoid Area (A = 0.5 x (b₁ + b₂) x h)</h4>
                        <label for="trapArea_b1" class="block text-sm font-medium text-gray-700 mb-1">Base 1 (b₁):</label>
                        <input type="number" id="trapArea_b1" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 5">
                        <label for="trapArea_b2" class="block text-sm font-medium text-gray-700 mb-1">Base 2 (b₂):</label>
                        <input type="number" id="trapArea_b2" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 7">
                        <label for="trapArea_h" class="block text-sm font-medium text-gray-700 mb-1">Height (h):</label>
                        <input type="number" id="trapArea_h" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 3">
                        <label for="trapArea_A" class="block text-sm font-medium text-gray-700 mb-1">Area (A):</label>
                        <input type="number" id="trapArea_A" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 18">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="trap-area-solver-btn">Calculate</button>
                        <div id="resultTrapAreaSolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                        <hr class="my-3 border-gray-200">
                        <!-- Triangle -->
                        <h4 class="text-sm font-semibold mb-1">Triangle Area (A = 0.5 x b x h)</h4>
                        <label for="triArea_b" class="block text-sm font-medium text-gray-700 mb-1">Base (b):</label>
                        <input type="number" id="triArea_b" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 10">
                        <label for="triArea_h" class="block text-sm font-medium text-gray-700 mb-1">Height (h):</label>
                        <input type="number" id="triArea_h" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 6">
                        <label for="triArea_A" class="block text-sm font-medium text-gray-700 mb-1">Area (A):</label>
                        <input type="number" id="triArea_A" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 30">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="tri-area-solver-btn">Calculate</button>
                        <div id="resultTriAreaSolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                        <hr class="my-3 border-gray-200">
                        <!-- Circle -->
                        <h4 class="text-sm font-semibold mb-1">Circle Area (A = π x r²)</h4>
                        <label for="circleArea_r" class="block text-sm font-medium text-gray-700 mb-1">Radius (r):</label>
                        <input type="number" id="circleArea_r" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 7">
                        <label for="circleArea_A" class="block text-sm font-medium text-gray-700 mb-1">Area (A):</label>
                        <input type="number" id="circleArea_A" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 153.94">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="circle-area-solver-btn">Calculate</button>
                        <div id="resultCircleAreaSolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                    </div>

                    <!-- Volume Formulas -->
                    <div class="menu-section bg-white p-5 rounded-xl border-2 border-rose-100">
                        <h3 class="font-medium text-rose-600 mb-2">Volume Formulas - Solver</h3>
                        <!-- Cube -->
                        <h4 class="text-sm font-semibold mb-1">Cube Volume (V = s³)</h4>
                        <label for="cubeVol_s" class="block text-sm font-medium text-gray-700 mb-1">Side (s):</label>
                        <input type="number" id="cubeVol_s" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 4">
                        <label for="cubeVol_V" class="block text-sm font-medium text-gray-700 mb-1">Volume (V):</label>
                        <input type="number" id="cubeVol_V" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 64">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="cube-vol-solver-btn">Calculate</button>
                        <div id="resultCubeVolumeSolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                        <hr class="my-3 border-gray-200">
                        <!-- Right Prism -->
                        <h4 class="text-sm font-semibold mb-1">Right Prism Volume (V = B x h)</h4>
                        <label for="prismVol_B" class="block text-sm font-medium text-gray-700 mb-1">Base Area (B):</label>
                        <input type="number" id="prismVol_B" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 25">
                        <label for="prismVol_h" class="block text-sm font-medium text-gray-700 mb-1">Height (h):</label>
                        <input type="number" id="prismVol_h" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 10">
                        <label for="prismVol_V" class="block text-sm font-medium text-gray-700 mb-1">Volume (V):</label>
                        <input type="number" id="prismVol_V" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 250">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="prism-vol-solver-btn">Calculate</button>
                        <div id="resultPrismVolumeSolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                        <hr class="my-3 border-gray-200">
                        <!-- Right Pyramid -->
                        <h4 class="text-sm font-semibold mb-1">Right Pyramid Volume (V = (1/3) x B x h)</h4>
                        <label for="pyramidVol_B" class="block text-sm font-medium text-gray-700 mb-1">Base Area (B):</label>
                        <input type="number" id="pyramidVol_B" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 36">
                        <label for="pyramidVol_h" class="block text-sm font-medium text-gray-700 mb-1">Height (h):</label>
                        <input type="number" id="pyramidVol_h" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 9">
                        <label for="pyramidVol_V" class="block text-sm font-medium text-gray-700 mb-1">Volume (V):</label>
                        <input type="number" id="pyramidVol_V" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 108">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="pyramid-vol-solver-btn">Calculate</button>
                        <div id="resultPyramidVolumeSolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                        <hr class="my-3 border-gray-200">
                        <!-- Right Cylinder -->
                        <h4 class="text-sm font-semibold mb-1">Right Cylinder Volume (V = π x r² x h)</h4>
                        <label for="cylVol_r" class="block text-sm font-medium text-gray-700 mb-1">Radius (r):</label>
                        <input type="number" id="cylVol_r" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 5">
                        <label for="cylVol_h" class="block text-sm font-medium text-gray-700 mb-1">Height (h):</label>
                        <input type="number" id="cylVol_h" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 12">
                        <label for="cylVol_V" class="block text-sm font-medium text-gray-700 mb-1">Volume (V):</label>
                        <input type="number" id="cylVol_V" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 942.48">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="cyl-vol-solver-btn">Calculate</button>
                        <div id="resultCylinderVolumeSolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                        <hr class="my-3 border-gray-200">
                        <!-- Right Cone -->
                        <h4 class="text-sm font-semibold mb-1">Right Cone Volume (V = (1/3) x π x r² x h)</h4>
                        <label for="coneVol_r" class="block text-sm font-medium text-gray-700 mb-1">Radius (r):</label>
                        <input type="number" id="coneVol_r" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 6">
                        <label for="coneVol_h" class="block text-sm font-medium text-gray-700 mb-1">Height (h):</label>
                        <input type="number" id="coneVol_h" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 10">
                        <label for="coneVol_V" class="block text-sm font-medium text-gray-700 mb-1">Volume (V):</label>
                        <input type="number" id="coneVol_V" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 376.99">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="cone-vol-solver-btn">Calculate</button>
                        <div id="resultConeVolumeSolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                        <hr class="my-3 border-gray-200">
                        <!-- Sphere -->
                        <h4 class="text-sm font-semibold mb-1">Sphere Volume (V = (4/3) x π x r³)</h4>
                        <label for="sphereVol_r" class="block text-sm font-medium text-gray-700 mb-1">Radius (r):</label>
                        <input type="number" id="sphereVol_r" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 3">
                        <label for="sphereVol_V" class="block text-sm font-medium text-gray-700 mb-1">Volume (V):</label>
                        <input type="number" id="sphereVol_V" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 113.10">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="sphere-vol-solver-btn">Calculate</button>
                        <div id="resultSphereVolumeSolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                    </div>

                    <!-- Other Geometric Formulas -->
                    <div class="menu-section bg-white p-5 rounded-xl border-2 border-rose-100">
                        <h3 class="font-medium text-rose-600 mb-2">Other Geometry - Solver</h3>
                        <!-- Surface Area of Right Prism -->
                        <h4 class="text-sm font-semibold mb-1">Right Prism Surface Area (SA = 2B + Ph)</h4>
                        <label for="prismSA_B" class="block text-sm font-medium text-gray-700 mb-1">Base Area (B):</label>
                        <input type="number" id="prismSA_B" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 20">
                        <label for="prismSA_P" class="block text-sm font-medium text-gray-700 mb-1">Base Perimeter (P):</label>
                        <input type="number" id="prismSA_P" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 18">
                        <label for="prismSA_h" class="block text-sm font-medium text-gray-700 mb-1">Height (h):</label>
                        <input type="number" id="prismSA_h" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 5">
                        <label for="prismSA_SA" class="block text-sm font-medium text-gray-700 mb-1">Surface Area (SA):</label>
                        <input type="number" id="prismSA_SA" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 130">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="prism-sa-solver-btn">Calculate</button>
                        <div id="resultPrismSurfaceAreaSolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                        <hr class="my-3 border-gray-200">
                        <!-- Rectangular Prism Surface Area -->
                        <h4 class="text-sm font-semibold mb-1">Rectangular Prism Surface Area (SA = 2lw + 2lh + 2wh)</h4>
                        <label for="rectPrismSA_l" class="block text-sm font-medium text-gray-700 mb-1">Length (l):</label>
                        <input type="number" id="rectPrismSA_l" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 5">
                        <label for="rectPrismSA_w" class="block text-sm font-medium text-gray-700 mb-1">Width (w):</label>
                        <input type="number" id="rectPrismSA_w" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 4">
                        <label for="rectPrismSA_h" class="block text-sm font-medium text-gray-700 mb-1">Height (h):</label>
                        <input type="number" id="rectPrismSA_h" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 3">
                        <label for="rectPrismSA_SA" class="block text-sm font-medium text-gray-700 mb-1">Surface Area (SA):</label>
                        <input type="number" id="rectPrismSA_SA" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 94">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="rect-prism-sa-solver-btn">Calculate</button>
                        <div id="resultRectPrismSASolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                        <hr class="my-3 border-gray-200">
                        <!-- Circumference of a Circle -->
                        <h4 class="text-sm font-semibold mb-1">Circle Circumference (C = 2 x π x r)</h4>
                        <label for="circleCirc_r" class="block text-sm font-medium text-gray-700 mb-1">Radius (r):</label>
                        <input type="number" id="circleCirc_r" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 7">
                        <label for="circleCirc_C" class="block text-sm font-medium text-gray-700 mb-1">Circumference (C):</label>
                        <input type="number" id="circleCirc_C" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 43.98">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="circle-circ-solver-btn">Calculate</button>
                        <div id="resultCircumferenceSolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                        <hr class="my-3 border-gray-200">
                        <!-- Diameter and Radius of a Circle -->
                        <h4 class="text-sm font-semibold mb-1">Circle Diameter (d = 2r) / Radius (r = d/2)</h4>
                        <label for="circleDR_d" class="block text-sm font-medium text-gray-700 mb-1">Diameter (d):</label>
                        <input type="number" id="circleDR_d" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 14">
                        <label for="circleDR_r" class="block text-sm font-medium text-gray-700 mb-1">Radius (r):</label>
                        <input type="number" id="circleDR_r" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 7">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="circle-dr-solver-btn">Calculate</button>
                        <div id="resultCircleDRSolver" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-rose-400 text-rose-950 border-rose-700"></div>
                    </div>
                </div>
            </div>

            <!-- Unit and Temperature Conversions Menu -->
            <div class="w-full mt-6 p-5 rounded-2xl shadow-xl border-2 bg-orange-50 border-orange-200" id="conversionMenuContainer">
                <div class="menu-header text-xl font-bold p-3 rounded-lg cursor-pointer flex justify-between items-center mb-4 border-2 transition-colors duration-200 bg-orange-300 text-orange-900 border-orange-500 hover:bg-orange-400" id="conversion-menu-header">
                    Unit & Temperature Conversions <span id="conversionToggleArrow">▶</span>
                </div>
                <div id="conversionMenu" class="menu-content hidden grid gap-4 overflow-y-auto max-h-[750px] p-2 pb-12">
                    <!-- Temperature Conversion -->
                    <div class="menu-section bg-white p-5 rounded-xl border-2 border-orange-100">
                        <h3 class="font-medium text-orange-600 mb-2">Temperature Conversion</h3>
                        <label for="tempInputVal" class="block text-sm font-medium text-gray-700 mb-1">Value:</label>
                        <input type="number" id="tempInputVal" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 0">
                        <label for="tempFromUnit" class="block text-sm font-medium text-gray-700 mb-1">From:</label>
                        <select id="tempFromUnit" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2">
                            <option value="C">Celsius (°C)</option>
                            <option value="F">Fahrenheit (°F)</option>
                            <option value="K">Kelvin (K)</option>
                        </select>
                        <label for="tempToUnit" class="block text-sm font-medium text-gray-700 mb-1">To:</label>
                        <select id="tempToUnit" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2">
                            <option value="C">Celsius (°C)</option>
                            <option value="F">Fahrenheit (°F)</option>
                            <option value="K">Kelvin (K)</option>
                        </select>
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="convert-temp-btn">Convert</button>
                        <div id="resultTemperature" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-orange-400 text-orange-950 border-orange-700"></div>
                    </div>

                    <!-- Unit Conversions -->
                    <div class="menu-section bg-white p-5 rounded-xl border-2 border-orange-100">
                        <h3 class="font-medium text-orange-600 mb-2">Unit Conversion</h3>
                        <label for="unitInputVal" class="block text-sm font-medium text-gray-700 mb-1">Value:</label>
                        <input type="number" id="unitInputVal" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 10">
                        <label for="unitType" class="block text-sm font-medium text-gray-700 mb-1">Type:</label>
                        <select id="unitType" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" onchange="populateUnitOptions()">
                            <option value="length">Length</option>
                            <option value="mass">Mass</option>
                            <option value="volume">Volume</option>
                        </select>
                        <label for="unitFromUnit" class="block text-sm font-medium text-gray-700 mb-1">From:</label>
                        <select id="unitFromUnit" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2"></select>
                        <label for="unitToUnit" class="block text-sm font-medium text-gray-700 mb-1">To:</label>
                        <select id="unitToUnit" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2"></select>
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="convert-unit-btn">Convert</button>
                        <div id="resultUnitConversion" class="result mt-3 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-orange-400 text-orange-950 border-orange-700"></div>
                    </div>

                    <!-- Scientific Notation Conversion -->
                    <div class="menu-section bg-white p-5 rounded-xl border-2 border-orange-100">
                        <h3 class="font-medium text-orange-600 mb-2">Scientific Notation Conversion</h3>
                        <label for="notationInput" class="block text-sm font-medium text-gray-700 mb-1">Number:</label>
                        <input type="text" id="notationInput" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 1234.5 or 1.23 x 10^4">
                        <div class="grid grid-cols-2 gap-2 mt-4">
                            <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="convert-to-scientific-btn">To Scientific</button>
                            <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="convert-to-standard-btn">To Standard</button>
                        </div>
                        <div id="notationResult" class="result mt-4 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-orange-400 text-orange-950 border-orange-700"></div>
                    </div>
                    <button class="menu-button-secondary mt-3 px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 active:bg-gray-500 transition-colors duration-200 shadow-md border border-gray-400 cursor-pointer w-full" id="reset-conversion-btn">Reset Conversions</button>
                </div>
            </div>

            <!-- Statistics Calculator Menu -->
            <div class="w-full mt-6 p-5 rounded-2xl shadow-xl border-2 bg-indigo-50 border-indigo-200" id="statisticsMenuContainer">
                <div class="menu-header text-xl font-bold p-3 rounded-lg cursor-pointer flex justify-between items-center mb-4 border-2 transition-colors duration-200 bg-indigo-300 text-indigo-900 border-indigo-500 hover:bg-indigo-400" id="statistics-menu-header">
                    Statistics Calculator <span id="statisticsToggleArrow">▶</span>
                </div>
                <div id="statisticsMenu" class="menu-content hidden grid gap-4 overflow-y-auto max-h-[750px] p-2 pb-12">
                    <div class="menu-section bg-white p-5 rounded-xl border-2 border-indigo-100">
                        <h3 class="font-medium text-indigo-600 mb-2">Calculate Statistics</h3>
                        <label for="dataInput" class="block text-sm font-medium text-gray-700 mb-1">Enter numbers (comma-separated):</label>
                        <input type="text" id="dataInput" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 mb-2" placeholder="e.g., 1, 5, 2, 8, 5">
                        <button class="menu-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 shadow-md border border-blue-700 cursor-pointer" id="calc-stats-btn">Calculate Statistics</button>
                        <div id="resultStats" class="result mt-4 p-3 rounded-lg font-semibold text-left border-2 shadow-xl min-h-[40px] flex flex-col justify-start items-start word-break-break-all bg-indigo-400 text-indigo-950 border-indigo-700"></div>
                    </div>
                    <button class="menu-button-secondary mt-3 px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 active:bg-gray-500 transition-colors duration-200 shadow-md border border-gray-400 cursor-pointer w-full" id="reset-stats-btn">Reset Statistics</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ALL JavaScript from the original Multi-Function Calculator is included below
        // This maintains ALL functionality, formulas, conversions, and calculations

        // Define global variables
        const display = document.getElementById('display');
        let awaitingNewInput = false;

        // Mapping for unit conversions
        const unitConversions = {
            length: {
                meter: 1, inch: 0.0254, foot: 0.3048, yard: 0.9144, mile: 1609.34,
                centimeter: 0.01, kilometer: 1000
            },
            mass: {
                gram: 1, pound: 453.592, ounce: 28.3495, kilogram: 1000,
                milligram: 0.001, ton_metric: 1000000
            },
            volume: {
                liter: 1,
                gallon: 3.78541,
                quart: 0.946353,
                pint: 0.473176,
                cup: 0.236588,
                milliliter: 0.001,
                cubic_meter: 1000,
                cubic_foot: 28.3168,
                cubic_inch: 0.0000163871,
                teaspoon: 0.00492892,
                tablespoon: 0.0147868,
                cubic_centimeter: 0.001
            }
        };

        // --- Main Calculator Functions ---

        function appendNumber(number) {
            if (awaitingNewInput) {
                display.value = '';
                awaitingNewInput = false;
            }
            if (display.value === '0' && number !== '.') {
                display.value = number;
            } else {
                display.value += number;
            }
            display.focus();
        }

        function appendOperator(operator) {
            awaitingNewInput = false;
            const lastChar = display.value.slice(-1);
            if (['+', '-', '*', '/', '^'].includes(lastChar)) {
                display.value = display.value.slice(0, -1) + operator;
            } else if (display.value !== '') {
                display.value += operator;
            }
            display.focus();
        }

        function appendDecimal() {
            if (awaitingNewInput) {
                display.value = '0.';
                awaitingNewInput = false;
                display.focus();
                return;
            }

            const parts = display.value.split(/[\+\-\*\/^]/);
            const lastPart = parts[parts.length - 1];

            if (!lastPart.includes('.')) {
                if (display.value === '' || ['+', '-', '*', '/', '^'].includes(display.value.slice(-1))) {
                    display.value += '0.';
                } else {
                    display.value += '.';
                }
            }
            display.focus();
        }

        function appendPi() {
            if (awaitingNewInput || display.value === '0') {
                display.value = Math.PI.toString();
                awaitingNewInput = false;
            } else {
                const lastChar = display.value.slice(-1);
                if (/\d/.test(lastChar) || lastChar === '.') {
                    display.value += '*' + Math.PI.toString();
                } else {
                    display.value += Math.PI.toString();
                }
            }
            display.focus();
        }

        function clearDisplay() {
            display.value = '0';
            awaitingNewInput = false;
            display.focus();
        }

        function deleteLast() {
            if (display.value.length === 1 || awaitingNewInput) {
                display.value = '0';
                awaitingNewInput = false;
            } else {
                display.value = display.value.slice(0, -1);
            }
            display.focus();
        }

        function toggleSign() {
            if (display.value === '' || display.value === '0') return;

            let value = display.value;
            const match = value.match(/([+\-*/^])?(-?\d+\.?\d*(?:[eE][+\-]?\d+)?)$/);

            if (match) {
                const operator = match[1] || '';
                const numStr = match[2];
                let num = parseFloat(numStr);

                if (!isNaN(num)) {
                    const newValue = value.substring(0, value.length - numStr.length);
                    display.value = newValue + (-num).toString();
                }
            } else {
                let num = parseFloat(value);
                if (!isNaN(num)) {
                    display.value = (-num).toString();
                }
            }
            awaitingNewInput = false;
            display.focus();
        }

        function formatScientific(num, precision = 3) {
            if (isNaN(num) || !isFinite(num)) return num.toString();

            if (Math.abs(num) >= 1e12 || (Math.abs(num) < 1e-6 && Math.abs(num) !== 0)) {
                return num.toExponential(precision);
            }
            return num.toFixed(precision).replace(/\.?0+$/, '');
        }

        function calculateResult() {
            if (display.value === '') return;

            try {
                let expressionToEvaluate = display.value
                    .replace(/([+\-]?\d+(\.\d*)?(?:[eE][+\-]?\d+)?)\^([+\-]?\d+(\.\d*)?(?:[eE][+\-]?\d+)?)/g, 'Math.pow($1,$3)')
                    .replace(/\(([^)]+)\)\^([+\-]?\d+(\.\d*)?(?:[eE][+\-]?\d+)?)/g, 'Math.pow($1,$2)')
                    .replace(/([+\-]?\d+(\.\d*)?(?:[eE][+\-]?\d+)?)\^\(([^)]+)\)/g, 'Math.pow($1,$3)');

                let result = eval(expressionToEvaluate);

                if (isNaN(result) || !isFinite(result)) {
                    display.value = 'Error';
                } else {
                    display.value = formatScientific(result);
                }
            } catch (e) {
                display.value = 'Error';
            }
            awaitingNewInput = true;
            display.focus();
        }

        // --- Menu Toggle Function ---
        function toggleMenu(menuId) {
            const menu = document.getElementById(menuId);
            const arrow = document.getElementById(menuId.replace('Menu', 'ToggleArrow'));
            menu.classList.toggle('hidden');
            if (menu.classList.contains('hidden')) {
                arrow.textContent = '▶';
                arrow.classList.remove('expanded');
            } else {
                arrow.textContent = '▼';
                arrow.classList.add('expanded');
            }
        }

        // --- Reset Functions for Menu Sections ---

        function resetPercentEquations() {
            document.getElementById('percentP1').value = '';
            document.getElementById('percentX1').value = '';
            document.getElementById('percentX2').value = '';
            document.getElementById('percentN2').value = '';
            document.getElementById('percentX3').value = '';
            document.getElementById('percentP3').value = '';
            setSolverResult('resultPercent1', '');
            setSolverResult('resultPercent2', '');
            setSolverResult('resultPercent3', '');
        }

        function resetFractionCalculator() {
            document.getElementById('f1_whole').value = '';
            document.getElementById('f1_numerator').value = '';
            document.getElementById('f1_denominator').value = '';
            document.getElementById('f2_whole').value = '';
            document.getElementById('f2_numerator').value = '';
            document.getElementById('f2_denominator').value = '';
            setSolverResult('fractionResult', '');
        }

        function resetGeometryFormulas() {
            // Area
            document.getElementById('squareArea_s').value = ''; document.getElementById('squareArea_A').value = '';
            setSolverResult('resultSquareAreaSolver', '');
            document.getElementById('rectArea_l').value = ''; document.getElementById('rectArea_w').value = ''; document.getElementById('rectArea_A').value = '';
            setSolverResult('resultRectAreaSolver', '');
            document.getElementById('paraArea_b').value = ''; document.getElementById('paraArea_h').value = ''; document.getElementById('paraArea_A').value = '';
            setSolverResult('resultParaAreaSolver', '');
            document.getElementById('rhombusArea_d1').value = ''; document.getElementById('rhombusArea_d2').value = ''; document.getElementById('rhombusArea_A').value = '';
            setSolverResult('resultRhombusKiteAreaSolver', '');
            document.getElementById('trapArea_b1').value = ''; document.getElementById('trapArea_b2').value = ''; document.getElementById('trapArea_h').value = ''; document.getElementById('trapArea_A').value = '';
            setSolverResult('resultTrapAreaSolver', '');
            document.getElementById('triArea_b').value = ''; document.getElementById('triArea_h').value = ''; document.getElementById('triArea_A').value = '';
            setSolverResult('resultTriAreaSolver', '');
            document.getElementById('circleArea_r').value = ''; document.getElementById('circleArea_A').value = '';
            setSolverResult('resultCircleAreaSolver', '');

            // Volume
            document.getElementById('cubeVol_s').value = ''; document.getElementById('cubeVol_V').value = '';
            setSolverResult('resultCubeVolumeSolver', '');
            document.getElementById('prismVol_B').value = ''; document.getElementById('prismVol_h').value = ''; document.getElementById('prismVol_V').value = '';
            setSolverResult('resultPrismVolumeSolver', '');
            document.getElementById('pyramidVol_B').value = ''; document.getElementById('pyramidVol_h').value = ''; document.getElementById('pyramidVol_V').value = '';
            setSolverResult('resultPyramidVolumeSolver', '');
            document.getElementById('cylVol_r').value = ''; document.getElementById('cylVol_h').value = ''; document.getElementById('cylVol_V').value = '';
            setSolverResult('resultCylinderVolumeSolver', '');
            document.getElementById('coneVol_r').value = ''; document.getElementById('coneVol_h').value = ''; document.getElementById('coneVol_V').value = '';
            setSolverResult('resultConeVolumeSolver', '');
            document.getElementById('sphereVol_r').value = ''; document.getElementById('sphereVol_V').value = '';
            setSolverResult('resultSphereVolumeSolver', '');

            // Other Geometry
            document.getElementById('prismSA_B').value = ''; document.getElementById('prismSA_P').value = ''; document.getElementById('prismSA_h').value = ''; document.getElementById('prismSA_SA').value = '';
            setSolverResult('resultPrismSurfaceAreaSolver', '');
            document.getElementById('rectPrismSA_l').value = ''; document.getElementById('rectPrismSA_w').value = ''; document.getElementById('rectPrismSA_h').value = ''; document.getElementById('rectPrismSA_SA').value = '';
            setSolverResult('resultRectPrismSASolver', '');
            document.getElementById('circleCirc_r').value = ''; document.getElementById('circleCirc_C').value = '';
            setSolverResult('resultCircumferenceSolver', '');
            document.getElementById('circleDR_d').value = ''; document.getElementById('circleDR_r').value = '';
            setSolverResult('resultCircleDRSolver', '');
        }

        function resetConversionCalculator() {
            document.getElementById('tempInputVal').value = '';
            document.getElementById('unitInputVal').value = '';
            document.getElementById('notationInput').value = '';
            setSolverResult('resultTemperature', '');
            setSolverResult('resultUnitConversion', '');
            setSolverResult('notationResult', '');
        }

        function resetStatisticsCalculator() {
            document.getElementById('dataInput').value = '';
            setSolverResult('resultStats', '');
        }

        // --- Percent Equation Functions ---

        function calculatePercent1() {
            const p = parseFloat(document.getElementById('percentP1').value);
            const x = parseFloat(document.getElementById('percentX1').value);
            const resultDiv = document.getElementById('resultPercent1');

            if (isNaN(p) || isNaN(x)) {
                resultDiv.textContent = 'Please enter valid numbers.';
                resultDiv.classList.add('error');
                return;
            }
            resultDiv.classList.remove('error');
            const result = (p / 100) * x;
            resultDiv.textContent = `Result: ${formatScientific(result)}`;
        }

        function calculatePercent2() {
            const x = parseFloat(document.getElementById('percentX2').value);
            const n = parseFloat(document.getElementById('percentN2').value);
            const resultDiv = document.getElementById('resultPercent2');

            if (isNaN(x) || isNaN(n)) {
                resultDiv.textContent = 'Please enter valid numbers.';
                resultDiv.classList.add('error');
                return;
            }
            if (n === 0) {
                resultDiv.textContent = 'Cannot divide by zero.';
                resultDiv.classList.add('error');
                return;
            }
            resultDiv.classList.remove('error');
            const result = (x / n) * 100;
            resultDiv.textContent = `Result: ${formatScientific(result)}%`;
        }

        function calculatePercent3() {
            const x = parseFloat(document.getElementById('percentX3').value);
            const p = parseFloat(document.getElementById('percentP3').value);
            const resultDiv = document.getElementById('resultPercent3');

            if (isNaN(x) || isNaN(p)) {
                resultDiv.textContent = 'Please enter valid numbers.';
                resultDiv.classList.add('error');
                return;
            }
            if (p === 0) {
                resultDiv.textContent = 'Percent cannot be zero.';
                resultDiv.classList.add('error');
                return;
            }
            resultDiv.classList.remove('error');
            const result = (x * 100) / p;
            resultDiv.textContent = `Result: ${formatScientific(result)}`;
        }

        // --- Geometric Formulas Functions (with Solver Logic) ---

        function getNumericInput(id) {
            const value = document.getElementById(id).value;
            if (value === '') return null;
            const parsed = parseFloat(value);
            return isNaN(parsed) ? null : parsed;
        }

        function setSolverResult(id, message, isError = false) {
            const resultDiv = document.getElementById(id);
            resultDiv.innerHTML = message;
            if (isError) {
                resultDiv.classList.add('error');
            } else {
                resultDiv.classList.remove('error');
            }
        }

        function validateSolverInputs(inputs, resultDivId) {
            let parsedInputs = [];
            let emptyCount = 0;
            let invalidCount = 0;
            let emptyFieldLabel = '';

            for (const input of inputs) {
                const value = getNumericInput(input.id);
                if (value === null) {
                    emptyCount++;
                    emptyFieldLabel = input.label;
                    if (document.getElementById(input.id).value !== '') {
                        invalidCount++;
                    }
                }
                parsedInputs.push({ id: input.id, value: value, label: input.label });
            }

            if (invalidCount > 0) {
                setSolverResult(resultDivId, 'Please enter valid numbers for all filled fields.', true);
                return null;
            }
            if (emptyCount === 0) {
                setSolverResult(resultDivId, 'Please leave exactly one field blank to solve.', true);
                return null;
            }
            if (emptyCount > 1) {
                setSolverResult(resultDivId, `Please fill all but one field to solve. You left ${emptyCount} fields blank.`, true);
                return null;
            }

            return { parsedInputs, emptyFieldLabel };
        }

        // --- Area Formulas ---

        function calculateSquareAreaSolver() {
            const validation = validateSolverInputs([
                { id: 'squareArea_s', label: 'Side (s)' },
                { id: 'squareArea_A', label: 'Area (A)' }
            ], 'resultSquareAreaSolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const s = parsedInputs[0].value;
            const A = parsedInputs[1].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Area (A)') {
                    if (s < 0) throw new Error("Side cannot be negative.");
                    result = s * s;
                    resultLabel = `Area (A): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Side (s)') {
                    if (A < 0) throw new Error("Area cannot be negative.");
                    result = Math.sqrt(A);
                    if (isNaN(result)) throw new Error("Invalid input for square root.");
                    resultLabel = `Side (s): ${formatScientific(result)}`;
                }
                setSolverResult('resultSquareAreaSolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultSquareAreaSolver', e.message, true);
            }
        }

        function calculateRectAreaSolver() {
            const validation = validateSolverInputs([
                { id: 'rectArea_l', label: 'Length (l)' },
                { id: 'rectArea_w', label: 'Width (w)' },
                { id: 'rectArea_A', label: 'Area (A)' }
            ], 'resultRectAreaSolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const l = parsedInputs[0].value;
            const w = parsedInputs[1].value;
            const A = parsedInputs[2].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Area (A)') {
                    if (l < 0 || w < 0) throw new Error("Length and width cannot be negative.");
                    result = l * w;
                    resultLabel = `Area (A): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Length (l)') {
                    if (w === 0) throw new Error("Width cannot be zero for division.");
                    if (A < 0 || w < 0) throw new Error("Area and width cannot be negative.");
                    result = A / w;
                    resultLabel = `Length (l): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Width (w)') {
                    if (l === 0) throw new Error("Length cannot be zero for division.");
                    if (A < 0 || l < 0) throw new Error("Area and length cannot be negative.");
                    result = A / l;
                    resultLabel = `Width (w): ${formatScientific(result)}`;
                }
                setSolverResult('resultRectAreaSolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultRectAreaSolver', e.message, true);
            }
        }

        function calculateParaAreaSolver() {
            const validation = validateSolverInputs([
                { id: 'paraArea_b', label: 'Base (b)' },
                { id: 'paraArea_h', label: 'Height (h)' },
                { id: 'paraArea_A', label: 'Area (A)' }
            ], 'resultParaAreaSolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const b = parsedInputs[0].value;
            const h = parsedInputs[1].value;
            const A = parsedInputs[2].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Area (A)') {
                    if (b < 0 || h < 0) throw new Error("Base and height cannot be negative.");
                    result = b * h;
                    resultLabel = `Area (A): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Base (b)') {
                    if (h === 0) throw new Error("Height cannot be zero for division.");
                    if (A < 0 || h < 0) throw new Error("Area and height cannot be negative.");
                    result = A / h;
                    resultLabel = `Base (b): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Height (h)') {
                    if (b === 0) throw new Error("Base cannot be zero for division.");
                    if (A < 0 || b < 0) throw new Error("Area and base cannot be negative.");
                    result = A / b;
                    resultLabel = `Height (h): ${formatScientific(result)}`;
                }
                setSolverResult('resultParaAreaSolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultParaAreaSolver', e.message, true);
            }
        }

        function calculateRhombusKiteAreaSolver() {
            const validation = validateSolverInputs([
                { id: 'rhombusArea_d1', label: 'Diagonal 1 (d₁)' },
                { id: 'rhombusArea_d2', label: 'Diagonal 2 (d₂)' },
                { id: 'rhombusArea_A', label: 'Area (A)' }
            ], 'resultRhombusKiteAreaSolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const d1 = parsedInputs[0].value;
            const d2 = parsedInputs[1].value;
            const A = parsedInputs[2].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Area (A)') {
                    if (d1 < 0 || d2 < 0) throw new Error("Diagonals cannot be negative.");
                    result = 0.5 * d1 * d2;
                    resultLabel = `Area (A): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Diagonal 1 (d₁)') {
                    if (d2 === 0) throw new Error("Diagonal 2 cannot be zero for division.");
                    if (A < 0 || d2 < 0) throw new Error("Area and diagonals cannot be negative.");
                    result = (2 * A) / d2;
                    resultLabel = `Diagonal 1 (d₁): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Diagonal 2 (d₂)') {
                    if (d1 === 0) throw new Error("Diagonal 1 cannot be zero for division.");
                    if (A < 0 || d1 < 0) throw new Error("Area and diagonals cannot be negative.");
                    result = (2 * A) / d1;
                    resultLabel = `Diagonal 2 (d₂): ${formatScientific(result)}`;
                }
                setSolverResult('resultRhombusKiteAreaSolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultRhombusKiteAreaSolver', e.message, true);
            }
        }

        function calculateTrapAreaSolver() {
            const validation = validateSolverInputs([
                { id: 'trapArea_b1', label: 'Base 1 (b₁)' },
                { id: 'trapArea_b2', label: 'Base 2 (b₂)' },
                { id: 'trapArea_h', label: 'Height (h)' },
                { id: 'trapArea_A', label: 'Area (A)' }
            ], 'resultTrapAreaSolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const b1 = parsedInputs[0].value;
            const b2 = parsedInputs[1].value;
            const h = parsedInputs[2].value;
            const A = parsedInputs[3].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Area (A)') {
                    if (b1 < 0 || b2 < 0 || h < 0) throw new Error("Bases and height cannot be negative.");
                    result = 0.5 * (b1 + b2) * h;
                    resultLabel = `Area (A): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Base 1 (b₁)') {
                    if (h === 0) throw new Error("Height cannot be zero for division.");
                    if (A < 0 || b2 < 0 || h < 0) throw new Error("Area, base 2, and height cannot be negative.");
                    result = (2 * A / h) - b2;
                    resultLabel = `Base 1 (b₁): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Base 2 (b₂)') {
                    if (h === 0) throw new Error("Height cannot be zero for division.");
                    if (A < 0 || b1 < 0 || h < 0) throw new Error("Area, base 1, and height cannot be negative.");
                    result = (2 * A / h) - b1;
                    resultLabel = `Base 2 (b₂): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Height (h)') {
                    if ((b1 + b2) === 0) throw new Error("Sum of bases cannot be zero for division.");
                    if (A < 0 || b1 < 0 || b2 < 0) throw new Error("Area and bases cannot be negative.");
                    result = (2 * A) / (b1 + b2);
                    resultLabel = `Height (h): ${formatScientific(result)}`;
                }
                setSolverResult('resultTrapAreaSolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultTrapAreaSolver', e.message, true);
            }
        }

        function calculateTriAreaSolver() {
            const validation = validateSolverInputs([
                { id: 'triArea_b', label: 'Base (b)' },
                { id: 'triArea_h', label: 'Height (h)' },
                { id: 'triArea_A', label: 'Area (A)' }
            ], 'resultTriAreaSolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const b = parsedInputs[0].value;
            const h = parsedInputs[1].value;
            const A = parsedInputs[2].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Area (A)') {
                    if (b < 0 || h < 0) throw new Error("Base and height cannot be negative.");
                    result = 0.5 * b * h;
                    resultLabel = `Area (A): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Base (b)') {
                    if (h === 0) throw new Error("Height cannot be zero for division.");
                    if (A < 0 || h < 0) throw new Error("Area and height cannot be negative.");
                    result = (2 * A) / h;
                    resultLabel = `Base (b): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Height (h)') {
                    if (b === 0) throw new Error("Base cannot be zero for division.");
                    if (A < 0 || b < 0) throw new Error("Area and base cannot be negative.");
                    result = (2 * A) / b;
                    resultLabel = `Height (h): ${formatScientific(result)}`;
                }
                setSolverResult('resultTriAreaSolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultTriAreaSolver', e.message, true);
            }
        }

        function calculateCircleAreaSolver() {
            const validation = validateSolverInputs([
                { id: 'circleArea_r', label: 'Radius (r)' },
                { id: 'circleArea_A', label: 'Area (A)' }
            ], 'resultCircleAreaSolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const r = parsedInputs[0].value;
            const A = parsedInputs[1].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Area (A)') {
                    if (r < 0) throw new Error("Radius cannot be negative.");
                    result = Math.PI * r * r;
                    resultLabel = `Area (A): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Radius (r)') {
                    if (A < 0) throw new Error("Area cannot be negative.");
                    result = Math.sqrt(A / Math.PI);
                    if (isNaN(result)) throw new Error("Invalid input for square root.");
                    resultLabel = `Radius (r): ${formatScientific(result)}`;
                }
                setSolverResult('resultCircleAreaSolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultCircleAreaSolver', e.message, true);
            }
        }

        // --- Volume Formulas ---

        function calculateCubeVolumeSolver() {
            const validation = validateSolverInputs([
                { id: 'cubeVol_s', label: 'Side (s)' },
                { id: 'cubeVol_V', label: 'Volume (V)' }
            ], 'resultCubeVolumeSolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const s = parsedInputs[0].value;
            const V = parsedInputs[1].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Volume (V)') {
                    if (s < 0) throw new Error("Side cannot be negative.");
                    result = Math.pow(s, 3);
                    resultLabel = `Volume (V): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Side (s)') {
                    if (V < 0) throw new Error("Volume cannot be negative.");
                    result = Math.cbrt(V);
                    if (isNaN(result)) throw new Error("Invalid input for cube root.");
                    resultLabel = `Side (s): ${formatScientific(result)}`;
                }
                setSolverResult('resultCubeVolumeSolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultCubeVolumeSolver', e.message, true);
            }
        }

        function calculatePrismVolumeSolver() {
            const validation = validateSolverInputs([
                { id: 'prismVol_B', label: 'Base Area (B)' },
                { id: 'prismVol_h', label: 'Height (h)' },
                { id: 'prismVol_V', label: 'Volume (V)' }
            ], 'resultPrismVolumeSolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const B = parsedInputs[0].value;
            const h = parsedInputs[1].value;
            const V = parsedInputs[2].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Volume (V)') {
                    if (B < 0 || h < 0) throw new Error("Base area and height cannot be negative.");
                    result = B * h;
                    resultLabel = `Volume (V): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Base Area (B)') {
                    if (h === 0) throw new Error("Height cannot be zero for division.");
                    if (V < 0 || h < 0) throw new Error("Volume and height cannot be negative.");
                    result = V / h;
                    resultLabel = `Base Area (B): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Height (h)') {
                    if (B === 0) throw new Error("Base area cannot be zero for division.");
                    if (V < 0 || B < 0) throw new Error("Volume and base area cannot be negative.");
                    result = V / B;
                    resultLabel = `Height (h): ${formatScientific(result)}`;
                }
                setSolverResult('resultPrismVolumeSolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultPrismVolumeSolver', e.message, true);
            }
        }

        function calculatePyramidVolumeSolver() {
            const validation = validateSolverInputs([
                { id: 'pyramidVol_B', label: 'Base Area (B)' },
                { id: 'pyramidVol_h', label: 'Height (h)' },
                { id: 'pyramidVol_V', label: 'Volume (V)' }
            ], 'resultPyramidVolumeSolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const B = parsedInputs[0].value;
            const h = parsedInputs[1].value;
            const V = parsedInputs[2].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Volume (V)') {
                    if (B < 0 || h < 0) throw new Error("Base area and height cannot be negative.");
                    result = (1 / 3) * B * h;
                    resultLabel = `Volume (V): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Base Area (B)') {
                    if (h === 0) throw new Error("Height cannot be zero for division.");
                    if (V < 0 || h < 0) throw new Error("Volume and height cannot be negative.");
                    result = (3 * V) / h;
                    resultLabel = `Base Area (B): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Height (h)') {
                    if (B === 0) throw new Error("Base area cannot be zero for division.");
                    if (V < 0 || B < 0) throw new Error("Volume and base area cannot be negative.");
                    result = (3 * V) / B;
                    resultLabel = `Height (h): ${formatScientific(result)}`;
                }
                setSolverResult('resultPyramidVolumeSolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultPyramidVolumeSolver', e.message, true);
            }
        }

        function calculateCylinderVolumeSolver() {
            const validation = validateSolverInputs([
                { id: 'cylVol_r', label: 'Radius (r)' },
                { id: 'cylVol_h', label: 'Height (h)' },
                { id: 'cylVol_V', label: 'Volume (V)' }
            ], 'resultCylinderVolumeSolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const r = parsedInputs[0].value;
            const h = parsedInputs[1].value;
            const V = parsedInputs[2].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Volume (V)') {
                    if (r < 0 || h < 0) throw new Error("Radius and height cannot be negative.");
                    result = Math.PI * r * r * h;
                    resultLabel = `Volume (V): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Radius (r)') {
                    if (h === 0) throw new Error("Height cannot be zero for division.");
                    if (V < 0 || h < 0) throw new Error("Volume and height cannot be negative.");
                    result = Math.sqrt(V / (Math.PI * h));
                    if (isNaN(result)) throw new Error("Invalid input for square root.");
                    resultLabel = `Radius (r): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Height (h)') {
                    if (r === 0) throw new Error("Radius cannot be zero for division.");
                    if (V < 0 || r < 0) throw Error("Volume and radius cannot be negative.");
                    result = V / (Math.PI * r * r);
                    resultLabel = `Height (h): ${formatScientific(result)}`;
                }
                setSolverResult('resultCylinderVolumeSolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultCylinderVolumeSolver', e.message, true);
            }
        }

        function calculateConeVolumeSolver() {
            const validation = validateSolverInputs([
                { id: 'coneVol_r', label: 'Radius (r)' },
                { id: 'coneVol_h', label: 'Height (h)' },
                { id: 'coneVol_V', label: 'Volume (V)' }
            ], 'resultConeVolumeSolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const r = parsedInputs[0].value;
            const h = parsedInputs[1].value;
            const V = parsedInputs[2].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Volume (V)') {
                    if (r < 0 || h < 0) throw new Error("Radius and height cannot be negative.");
                    result = (1 / 3) * Math.PI * r * r * h;
                    resultLabel = `Volume (V): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Radius (r)') {
                    if (h === 0) throw new Error("Height cannot be zero for division.");
                    if (V < 0 || h < 0) throw new Error("Volume and height cannot be negative.");
                    result = Math.sqrt((3 * V) / (Math.PI * h));
                    if (isNaN(result)) throw new Error("Invalid input for square root.");
                    resultLabel = `Radius (r): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Height (h)') {
                    if (r === 0) throw new Error("Radius cannot be zero for division.");
                    if (V < 0 || r < 0) throw new Error("Volume and radius cannot be negative.");
                    result = (3 * V) / (Math.PI * r * r);
                    resultLabel = `Height (h): ${formatScientific(result)}`;
                }
                setSolverResult('resultConeVolumeSolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultConeVolumeSolver', e.message, true);
            }
        }

        function calculateSphereVolumeSolver() {
            const validation = validateSolverInputs([
                { id: 'sphereVol_r', label: 'Radius (r)' },
                { id: 'sphereVol_V', label: 'Volume (V)' }
            ], 'resultSphereVolumeSolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const r = parsedInputs[0].value;
            const V = parsedInputs[1].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Volume (V)') {
                    if (r < 0) throw new Error("Radius cannot be negative.");
                    result = (4 / 3) * Math.PI * Math.pow(r, 3);
                    resultLabel = `Volume (V): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Radius (r)') {
                    if (V < 0) throw new Error("Volume cannot be negative.");
                    result = Math.cbrt((3 * V) / (4 * Math.PI));
                    if (isNaN(result)) throw new Error("Invalid input for cube root.");
                    resultLabel = `Radius (r): ${formatScientific(result)}`;
                }
                setSolverResult('resultSphereVolumeSolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultSphereVolumeSolver', e.message, true);
            }
        }

        // --- Other Geometric Formulas ---

        function calculatePrismSurfaceAreaSolver() {
            const validation = validateSolverInputs([
                { id: 'prismSA_B', label: 'Base Area (B)' },
                { id: 'prismSA_P', label: 'Base Perimeter (P)' },
                { id: 'prismSA_h', label: 'Height (h)' },
                { id: 'prismSA_SA', label: 'Surface Area (SA)' }
            ], 'resultPrismSurfaceAreaSolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const B = parsedInputs[0].value;
            const P = parsedInputs[1].value;
            const h = parsedInputs[2].value;
            const SA = parsedInputs[3].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Surface Area (SA)') {
                    if (B < 0 || P < 0 || h < 0) throw new Error("Inputs cannot be negative.");
                    result = (2 * B) + (P * h);
                    resultLabel = `Surface Area (SA): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Base Area (B)') {
                    if (SA < 0 || P < 0 || h < 0) throw new Error("Inputs cannot be negative.");
                    result = (SA - (P * h)) / 2;
                    resultLabel = `Base Area (B): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Base Perimeter (P)') {
                    if (h === 0) throw new Error("Height cannot be zero for division.");
                    if (SA < 0 || B < 0 || h < 0) throw new Error("Inputs cannot be negative.");
                    result = (SA - (2 * B)) / h;
                    resultLabel = `Base Perimeter (P): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Height (h)') {
                    if (P === 0) throw new Error("Base perimeter cannot be zero for division.");
                    if (SA < 0 || B < 0 || P < 0) throw new Error("Inputs cannot be negative.");
                    result = (SA - (2 * B)) / P;
                    resultLabel = `Height (h): ${formatScientific(result)}`;
                }
                setSolverResult('resultPrismSurfaceAreaSolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultPrismSurfaceAreaSolver', e.message, true);
            }
        }

        function calculateRectangularPrismSASolver() {
            const validation = validateSolverInputs([
                { id: 'rectPrismSA_l', label: 'Length (l)' },
                { id: 'rectPrismSA_w', label: 'Width (w)' },
                { id: 'rectPrismSA_h', label: 'Height (h)' },
                { id: 'rectPrismSA_SA', label: 'Surface Area (SA)' }
            ], 'resultRectPrismSASolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const l = parsedInputs[0].value;
            const w = parsedInputs[1].value;
            const h = parsedInputs[2].value;
            const SA = parsedInputs[3].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Surface Area (SA)') {
                    if (l < 0 || w < 0 || h < 0) throw new Error("Length, width, and height cannot be negative.");
                    result = (2 * l * w) + (2 * l * h) + (2 * w * h);
                    resultLabel = `Surface Area (SA): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Length (l)') {
                    const denominator = (2 * w) + (2 * h);
                    if (denominator === 0) throw new Error("Cannot solve: (2w + 2h) is zero.");
                    if (SA < 0 || w < 0 || h < 0) throw new Error("Inputs cannot be negative.");
                    result = (SA - (2 * w * h)) / denominator;
                    resultLabel = `Length (l): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Width (w)') {
                    const denominator = (2 * l) + (2 * h);
                    if (denominator === 0) throw new Error("Cannot solve: (2l + 2h) is zero.");
                    if (SA < 0 || l < 0 || h < 0) throw new Error("Inputs cannot be negative.");
                    result = (SA - (2 * l * h)) / denominator;
                    resultLabel = `Width (w): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Height (h)') {
                    const denominator = (2 * l) + (2 * w);
                    if (denominator === 0) throw new Error("Cannot solve: (2l + 2w) is zero.");
                    if (SA < 0 || l < 0 || w < 0) throw new Error("Inputs cannot be negative.");
                    result = (SA - (2 * l * w)) / denominator;
                    resultLabel = `Height (h): ${formatScientific(result)}`;
                }
                setSolverResult('resultRectPrismSASolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultRectPrismSASolver', e.message, true);
            }
        }

        function calculateCircumferenceSolver() {
            const validation = validateSolverInputs([
                { id: 'circleCirc_r', label: 'Radius (r)' },
                { id: 'circleCirc_C', label: 'Circumference (C)' }
            ], 'resultCircumferenceSolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const r = parsedInputs[0].value;
            const C = parsedInputs[1].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Circumference (C)') {
                    if (r < 0) throw new Error("Radius cannot be negative.");
                    result = 2 * Math.PI * r;
                    resultLabel = `Circumference (C): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Radius (r)') {
                    if (C < 0) throw new Error("Circumference cannot be negative.");
                    if (Math.PI === 0) throw new Error("Pi cannot be zero for division.");
                    result = C / (2 * Math.PI);
                    resultLabel = `Radius (r): ${formatScientific(result)}`;
                }
                setSolverResult('resultCircumferenceSolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultCircumferenceSolver', e.message, true);
            }
        }

        function calculateCircleDRSolver() {
            const validation = validateSolverInputs([
                { id: 'circleDR_d', label: 'Diameter (d)' },
                { id: 'circleDR_r', label: 'Radius (r)' }
            ], 'resultCircleDRSolver');

            if (!validation) return;
            const { parsedInputs, emptyFieldLabel } = validation;

            const d = parsedInputs[0].value;
            const r = parsedInputs[1].value;
            let result = null;
            let resultLabel = '';

            try {
                if (emptyFieldLabel === 'Diameter (d)') {
                    if (r < 0) throw new Error("Radius cannot be negative.");
                    result = 2 * r;
                    resultLabel = `Diameter (d): ${formatScientific(result)}`;
                } else if (emptyFieldLabel === 'Radius (r)') {
                    if (d < 0) throw new Error("Diameter cannot be negative.");
                    result = d / 2;
                    resultLabel = `Radius (r): ${formatScientific(result)}`;
                }
                setSolverResult('resultCircleDRSolver', `Calculated ${resultLabel}`);
            } catch (e) {
                setSolverResult('resultCircleDRSolver', e.message, true);
            }
        }

        // --- Temperature Conversion Functions ---
        function convertTemperature() {
            const val = parseFloat(document.getElementById('tempInputVal').value);
            const fromUnit = document.getElementById('tempFromUnit').value;
            const toUnit = document.getElementById('tempToUnit').value;
            const resultDiv = document.getElementById('resultTemperature');

            if (isNaN(val)) {
                resultDiv.textContent = 'Please enter a valid number.';
                resultDiv.classList.add('error');
                return;
            }

            let celsius;
            if (fromUnit === 'C') {
                celsius = val;
            } else if (fromUnit === 'F') {
                celsius = (val - 32) * 5 / 9;
            } else if (fromUnit === 'K') {
                celsius = val - 273.15;
            }

            let result;
            if (toUnit === 'C') {
                result = celsius;
            } else if (toUnit === 'F') {
                result = (celsius * 9 / 5) + 32;
            } else if (toUnit === 'K') {
                result = celsius + 273.15;
            }
            resultDiv.classList.remove('error');
            resultDiv.textContent = `Result: ${formatScientific(result)} ${toUnit === 'C' ? '°C' : (toUnit === 'F' ? '°F' : 'K')}`;
        }

        // --- Unit Conversion Functions ---

        function populateUnitOptions() {
            const unitType = document.getElementById('unitType').value;
            const fromSelect = document.getElementById('unitFromUnit');
            const toSelect = document.getElementById('unitToUnit');

            fromSelect.innerHTML = '';
            toSelect.innerHTML = '';

            const units = unitConversions[unitType];
            for (const unitKey in units) {
                const optionFrom = document.createElement('option');
                optionFrom.value = unitKey;
                optionFrom.textContent = unitKey.replace(/_/g, ' ');
                fromSelect.appendChild(optionFrom);

                const optionTo = document.createElement('option');
                optionTo.value = unitKey;
                optionTo.textContent = unitKey.replace(/_/g, ' ');
                toSelect.appendChild(optionTo);
            }
        }

        function convertUnit() {
            const val = parseFloat(document.getElementById('unitInputVal').value);
            const unitType = document.getElementById('unitType').value;
            const fromUnit = document.getElementById('unitFromUnit').value;
            const toUnit = document.getElementById('unitToUnit').value;
            const resultDiv = document.getElementById('resultUnitConversion');

            if (isNaN(val)) {
                resultDiv.textContent = 'Please enter a valid number.';
                resultDiv.classList.add('error');
                return;
            }

            const units = unitConversions[unitType];
            const valInBase = val * units[fromUnit];
            const result = valInBase / units[toUnit];

            resultDiv.classList.remove('error');
            resultDiv.textContent = `Result: ${formatScientific(result)} ${toUnit.replace(/_/g, ' ')}`;
        }

        // --- Scientific Notation Conversion Functions ---

        function parseScientificNotationInput(str) {
            str = str.trim();
            if (!str) return NaN;

            const textbookRegex = /^(-?\d+(\.\d*)?)\s*x\s*10\^\(?([+\-]?\d+)\)?$/i;
            const match = str.match(textbookRegex);

            if (match) {
                const mantissa = parseFloat(match[1]);
                const exponent = parseInt(match[3], 10);
                if (!isNaN(mantissa) && !isNaN(exponent)) {
                    return mantissa * Math.pow(10, exponent);
                }
            }

            let num = parseFloat(str);
            if (!isNaN(num) && isFinite(num)) {
                return num;
            }

            return NaN;
        }

        function formatToTextbookScientific(num) {
            if (isNaN(num) || !isFinite(num)) {
                return 'Invalid Number';
            }
            if (num === 0) {
                return '0';
            }

            let sign = num < 0 ? '-' : '';
            let absNum = Math.abs(num);

            let expStr = absNum.toExponential();
            const match = expStr.match(/(\d+\.?\d*)e([+\-]?\d+)/);

            if (match) {
                let mantissa = parseFloat(match[1]);
                let exponent = parseInt(match[2], 10);

                let formattedMantissa = mantissa.toFixed(5);
                formattedMantissa = formattedMantissa.replace(/\.?0+$/, '');

                return `${sign}${formattedMantissa} x 10<sup>${exponent}</sup>`;
            } else {
                return num.toString();
            }
        }

        function convertToStandard() {
            const inputVal = document.getElementById('notationInput').value;
            const resultDiv = document.getElementById('notationResult');
            const num = parseScientificNotationInput(inputVal);

            if (isNaN(num) || !isFinite(num)) {
                setSolverResult('notationResult', 'Please enter a valid scientific or standard number.', true);
                return;
            }

            let standardStr;
            if (num === 0) {
                standardStr = '0';
            } else {
                const absNum = Math.abs(num);
                if (absNum < 0.000001 || (absNum > 1 && absNum < 1e21 && num.toString().includes('e'))) {
                    standardStr = num.toFixed(20);
                    standardStr = standardStr.replace(/\.?0+$/, '');
                } else {
                    standardStr = num.toString();
                }
            }

            setSolverResult('notationResult', `Standard: ${standardStr}`);
        }

        function convertToScientific() {
            const inputVal = document.getElementById('notationInput').value;
            const resultDiv = document.getElementById('notationResult');
            const num = parseScientificNotationInput(inputVal);

            if (isNaN(num) || !isFinite(num)) {
                setSolverResult('notationResult', 'Please enter a valid scientific or standard number.', true);
                return;
            }

            setSolverResult('notationResult', `Scientific: ${formatToTextbookScientific(num)}`);
        }

        // --- Fraction Calculator Functions ---

        function gcd(a, b) {
            return b === 0 ? a : gcd(b, a % b);
        }

        function reduceFraction(numerator, denominator) {
            if (denominator === 0) return { numerator: numerator, denominator: 0 };
            if (numerator === 0) return { numerator: 0, denominator: 1 };

            const common = gcd(Math.abs(numerator), Math.abs(denominator));
            let newNumerator = numerator / common;
            let newDenominator = denominator / common;

            if (newDenominator < 0) {
                newNumerator *= -1;
                newDenominator *= -1;
            }
            return { numerator: newNumerator, denominator: newDenominator };
        }

        function toMixedNumber(numerator, denominator) {
            if (denominator === 0) return "Undefined";
            if (numerator === 0) return "0";

            const reduced = reduceFraction(numerator, denominator);
            const absNumerator = Math.abs(reduced.numerator);
            const absDenominator = Math.abs(reduced.denominator);

            const wholePart = Math.floor(absNumerator / absDenominator);
            const remainder = absNumerator % absDenominator;

            let sign = '';
            if (numerator < 0) {
                sign = '-';
            }

            if (remainder === 0) {
                return sign + wholePart.toString();
            } else if (wholePart === 0) {
                return sign + `${remainder}/${absDenominator}`;
            }
            else {
                return sign + `${wholePart} ${remainder}/${absDenominator}`;
            }
        }

        function parseFractionInput(wholeId, numId, denId) {
            let whole = getNumericInput(wholeId) || 0;
            let numerator = getNumericInput(numId) || 0;
            let denominator = getNumericInput(denId) || 1;

            if (isNaN(whole) || isNaN(numerator) || isNaN(denominator)) {
                return null;
            }
            if (denominator === 0) {
                return { error: "Denominator cannot be zero." };
            }

            let combinedNumerator = Math.abs(whole) * denominator + Math.abs(numerator);
            if (whole < 0 || (whole === 0 && numerator < 0)) {
                combinedNumerator = -combinedNumerator;
            }

            return { numerator: combinedNumerator, denominator: denominator };
        }

        function calculateFractions(operation) {
            const f1 = parseFractionInput('f1_whole', 'f1_numerator', 'f1_denominator');
            const f2 = parseFractionInput('f2_whole', 'f2_numerator', 'f2_denominator');
            const resultDiv = document.getElementById('fractionResult');

            if (!f1 || !f2) {
                setSolverResult('fractionResult', 'Please enter valid numbers for both fractions.', true);
                return;
            }
            if (f1.error) { setSolverResult('fractionResult', f1.error, true); return; }
            if (f2.error) { setSolverResult('fractionResult', f2.error, true); return; }

            let resultNumerator, resultDenominator;

            switch (operation) {
                case 'add':
                    resultNumerator = (f1.numerator * f2.denominator) + (f2.numerator * f1.denominator);
                    resultDenominator = f1.denominator * f2.denominator;
                    break;
                case 'subtract':
                    resultNumerator = (f1.numerator * f2.denominator) - (f2.numerator * f1.denominator);
                    resultDenominator = f1.denominator * f2.denominator;
                    break;
                case 'multiply':
                    resultNumerator = f1.numerator * f2.numerator;
                    resultDenominator = f1.denominator * f2.denominator;
                    break;
                case 'divide':
                    if (f2.numerator === 0) {
                        setSolverResult('fractionResult', 'Cannot divide by zero.', true);
                        return;
                    }
                    resultNumerator = f1.numerator * f2.denominator;
                    resultDenominator = f1.denominator * f2.numerator;
                    break;
                default:
                    setSolverResult('fractionResult', 'Invalid operation.', true);
                    return;
            }

            const finalFraction = reduceFraction(resultNumerator, resultDenominator);

            if (finalFraction.denominator === 0) {
                setSolverResult('fractionResult', 'Result undefined (division by zero).', true);
            } else {
                const improperString = `${finalFraction.numerator}/${finalFraction.denominator}`;
                const mixedString = toMixedNumber(finalFraction.numerator, finalFraction.denominator);
                setSolverResult('fractionResult', `Reduced: ${improperString}<br>Mixed: ${mixedString}`);
            }
        }

        // --- Statistics Functions ---

        function parseNumbers(inputString) {
            const parts = inputString.split(',').map(s => s.trim());
            const numbers = [];
            for (const part of parts) {
                if (part === '') continue;
                const num = parseFloat(part);
                if (isNaN(num)) {
                    return null;
                }
                numbers.push(num);
            }
            return numbers;
        }

        function calculateMean(numbers) {
            if (numbers.length === 0) return NaN;
            const sum = numbers.reduce((acc, curr) => acc + curr, 0);
            return sum / numbers.length;
        }

        function calculateMedian(numbers) {
            if (numbers.length === 0) return NaN;
            const sortedNumbers = [...numbers].sort((a, b) => a - b);
            const mid = Math.floor(sortedNumbers.length / 2);
            if (sortedNumbers.length % 2 === 0) {
                return (sortedNumbers[mid - 1] + sortedNumbers[mid]) / 2;
            } else {
                return sortedNumbers[mid];
            }
        }

        function calculateMode(numbers) {
            if (numbers.length === 0) return [];
            const counts = {};
            numbers.forEach(num => {
                counts[num] = (counts[num] || 0) + 1;
            });

            let maxCount = 0;
            for (const num in counts) {
                if (counts[num] > maxCount) {
                    maxCount = counts[num];
                }
            }

            const modes = [];
            for (const num in counts) {
                if (counts[num] === maxCount) {
                    modes.push(parseFloat(num));
                }
            }

            if (Object.keys(counts).length === numbers.length && numbers.length > 0 && maxCount === 1) {
                return ["No repeating mode"];
            }

            return modes.sort((a,b) => a-b).map(m => formatScientific(m));
        }

        function calculateRange(numbers) {
            if (numbers.length === 0) return NaN;
            const max = Math.max(...numbers);
            const min = Math.min(...numbers);
            return max - min;
        }

        function calculateMeanAbsoluteDeviation(numbers) {
            if (numbers.length === 0) return NaN;
            const mean = calculateMean(numbers);
            if (isNaN(mean)) return NaN;

            const absoluteDifferencesSum = numbers.reduce((acc, curr) => acc + Math.abs(curr - mean), 0);
            return absoluteDifferencesSum / numbers.length;
        }

        function calculateAllStatistics() {
            const inputString = document.getElementById('dataInput').value;
            const resultDiv = document.getElementById('resultStats');
            resultDiv.classList.remove('error');

            if (!inputString.trim()) {
                setSolverResult('resultStats', 'Please enter numbers to calculate statistics.', true);
                return;
            }

            const numbers = parseNumbers(inputString);

            if (numbers === null) {
                setSolverResult('resultStats', 'Invalid input. Please enter comma-separated numbers only.', true);
                return;
            }
            if (numbers.length === 0) {
                 setSolverResult('resultStats', 'No numbers found in input. Please enter valid numbers.', true);
                 return;
            }

            const mean = calculateMean(numbers);
            const median = calculateMedian(numbers);
            const mode = calculateMode(numbers);
            const range = calculateRange(numbers);
            const mad = calculateMeanAbsoluteDeviation(numbers);

            let resultHtml = `
                <p><strong>Mean:</strong> ${formatScientific(mean)}</p>
                <p><strong>Median:</strong> ${formatScientific(median)}</p>
                <p><strong>Mode:</strong> ${mode.join(', ')}</p>
                <p><strong>Range:</strong> ${formatScientific(range)}</p>
                <p><strong>MAD:</strong> ${formatScientific(mad)}</p>
            `;

            resultHtml += `<p class="mt-4 font-bold text-indigo-700">Deviations:</p>`;
            if (numbers.length > 0 && !isNaN(mean)) {
                const sortedNumbersForDeviations = [...numbers].sort((a, b) => a - b);
                resultHtml += `<table class="deviation-table mt-2">`;
                resultHtml += `<thead><tr><th>Original Value</th><th>Deviation</th></tr></thead><tbody>`;
                sortedNumbersForDeviations.forEach(num => {
                    const deviation = Math.abs(num - mean);
                    resultHtml += `<tr><td>${formatScientific(num)}</td><td>|${formatScientific(num)} - ${formatScientific(mean)}| = ${formatScientific(deviation)}</td></tr>`;
                });
                resultHtml += `</tbody></table>`;
            } else {
                resultHtml += `<p>Not applicable for given input.</p>`;
            }

            setSolverResult('resultStats', resultHtml);
        }

        // Event Listeners for all buttons and menu toggles
        document.addEventListener('DOMContentLoaded', () => {
            populateUnitOptions(); // Initial population of unit options

            // Main Calculator Buttons
            document.getElementById('display').addEventListener('input', () => {
                awaitingNewInput = false;
            });
            document.getElementById('display').addEventListener('keydown', (event) => {
                if (event.key === 'Enter') {
                    calculateResult();
                    event.preventDefault();
                }
            });

            document.getElementById('clear-btn').addEventListener('click', clearDisplay);
            document.getElementById('bksp-btn').addEventListener('click', deleteLast);
            document.getElementById('toggle-sign-btn').addEventListener('click', toggleSign);
            document.getElementById('divide-btn').addEventListener('click', () => appendOperator('/'));
            document.getElementById('seven-btn').addEventListener('click', () => appendNumber('7'));
            document.getElementById('eight-btn').addEventListener('click', () => appendNumber('8'));
            document.getElementById('nine-btn').addEventListener('click', () => appendNumber('9'));
            document.getElementById('multiply-btn').addEventListener('click', () => appendOperator('*'));
            document.getElementById('four-btn').addEventListener('click', () => appendNumber('4'));
            document.getElementById('five-btn').addEventListener('click', () => appendNumber('5'));
            document.getElementById('six-btn').addEventListener('click', () => appendNumber('6'));
            document.getElementById('subtract-btn').addEventListener('click', () => appendOperator('-'));
            document.getElementById('one-btn').addEventListener('click', () => appendNumber('1'));
            document.getElementById('two-btn').addEventListener('click', () => appendNumber('2'));
            document.getElementById('three-btn').addEventListener('click', () => appendNumber('3'));
            document.getElementById('add-btn').addEventListener('click', () => appendOperator('+'));
            document.getElementById('zero-btn').addEventListener('click', () => appendNumber('0'));
            document.getElementById('decimal-btn').addEventListener('click', appendDecimal);
            document.getElementById('pi-btn').addEventListener('click', appendPi);
            document.getElementById('exponent-btn').addEventListener('click', () => appendOperator('^'));
            document.getElementById('equals-btn').addEventListener('click', calculateResult);

            // Menu Toggles
            document.getElementById('percent-menu-header').addEventListener('click', () => toggleMenu('percentMenu'));
            document.getElementById('fraction-menu-header').addEventListener('click', () => toggleMenu('fractionMenu'));
            document.getElementById('geometry-menu-header').addEventListener('click', () => toggleMenu('geometryMenu'));
            document.getElementById('conversion-menu-header').addEventListener('click', () => toggleMenu('conversionMenu'));
            document.getElementById('statistics-menu-header').addEventListener('click', () => toggleMenu('statisticsMenu'));

            // Percent Equations Buttons
            document.getElementById('calc-percent1-btn').addEventListener('click', calculatePercent1);
            document.getElementById('calc-percent2-btn').addEventListener('click', calculatePercent2);
            document.getElementById('calc-percent3-btn').addEventListener('click', calculatePercent3);
            document.getElementById('reset-percent-btn').addEventListener('click', resetPercentEquations);

            // Fraction Calculator Buttons
            document.getElementById('frac-add-btn').addEventListener('click', () => calculateFractions('add'));
            document.getElementById('frac-subtract-btn').addEventListener('click', () => calculateFractions('subtract'));
            document.getElementById('frac-multiply-btn').addEventListener('click', () => calculateFractions('multiply'));
            document.getElementById('frac-divide-btn').addEventListener('click', () => calculateFractions('divide'));
            document.getElementById('reset-fraction-btn').addEventListener('click', resetFractionCalculator);

            // Geometric Formulas Solver Buttons
            document.getElementById('square-area-solver-btn').addEventListener('click', calculateSquareAreaSolver);
            document.getElementById('rect-area-solver-btn').addEventListener('click', calculateRectAreaSolver);
            document.getElementById('para-area-solver-btn').addEventListener('click', calculateParaAreaSolver);
            document.getElementById('rhombus-kite-area-solver-btn').addEventListener('click', calculateRhombusKiteAreaSolver);
            document.getElementById('trap-area-solver-btn').addEventListener('click', calculateTrapAreaSolver);
            document.getElementById('tri-area-solver-btn').addEventListener('click', calculateTriAreaSolver);
            document.getElementById('circle-area-solver-btn').addEventListener('click', calculateCircleAreaSolver);
            document.getElementById('cube-vol-solver-btn').addEventListener('click', calculateCubeVolumeSolver);
            document.getElementById('prism-vol-solver-btn').addEventListener('click', calculatePrismVolumeSolver);
            document.getElementById('pyramid-vol-solver-btn').addEventListener('click', calculatePyramidVolumeSolver);
            document.getElementById('cyl-vol-solver-btn').addEventListener('click', calculateCylinderVolumeSolver);
            document.getElementById('cone-vol-solver-btn').addEventListener('click', calculateConeVolumeSolver);
            document.getElementById('sphere-vol-solver-btn').addEventListener('click', calculateSphereVolumeSolver);
            document.getElementById('prism-sa-solver-btn').addEventListener('click', calculatePrismSurfaceAreaSolver);
            document.getElementById('rect-prism-sa-solver-btn').addEventListener('click', calculateRectangularPrismSASolver);
            document.getElementById('circle-circ-solver-btn').addEventListener('click', calculateCircumferenceSolver);
            document.getElementById('circle-dr-solver-btn').addEventListener('click', calculateCircleDRSolver);
            document.getElementById('reset-geometry-btn').addEventListener('click', resetGeometryFormulas);

            // Unit & Temperature Conversions Buttons
            document.getElementById('convert-temp-btn').addEventListener('click', convertTemperature);
            document.getElementById('convert-unit-btn').addEventListener('click', convertUnit);
            document.getElementById('convert-to-scientific-btn').addEventListener('click', convertToScientific);
            document.getElementById('convert-to-standard-btn').addEventListener('click', convertToStandard);
            document.getElementById('reset-conversion-btn').addEventListener('click', resetConversionCalculator);

            // Statistics Calculator Button
            document.getElementById('calc-stats-btn').addEventListener('click', calculateAllStatistics);
            document.getElementById('reset-stats-btn').addEventListener('click', resetStatisticsCalculator);
        });
    </script>
</body>
</html>
