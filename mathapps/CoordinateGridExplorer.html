<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coordinate Grid Explorer</title>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        
        #mainContainer {
            display: flex;
            gap: 20px;
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            max-width: 1000px;
            width: 100%;
        }
        
        #sidebar {
            width: 320px;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 600px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        #sidebar::-webkit-scrollbar {
            width: 8px;
        }
        
        #sidebar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        #sidebar::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        
        #canvasArea {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }
        
        h1 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 24px;
            text-align: center;
        }
        
        .section {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        
        .section-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        #modeButtons {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .mode-btn {
            padding: 10px 15px;
            border: none;
            border-radius: 6px;
            background: #e0e0e0;
            color: #333;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            font-size: 14px;
        }
        
        .mode-btn:hover {
            background: #d0d0d0;
            transform: translateX(3px);
        }
        
        .mode-btn.active {
            background: #4CAF50;
            color: white;
            box-shadow: 0 2px 4px rgba(76,175,80,0.3);
        }
        
        canvas {
            border: 3px solid #333;
            background: white;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            max-width: 100%;
            height: auto;
        }
        
        .panel {
            display: none;
        }
        
        .panel.active {
            display: block;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 10px 0;
        }
        
        .point-input {
            display: flex;
            gap: 8px;
            align-items: center;
            background: white;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
            font-size: 14px;
        }
        
        .point-input strong {
            min-width: 70px;
            font-size: 13px;
        }
        
        input[type="number"] {
            width: 50px;
            padding: 6px;
            border: 2px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            text-align: center;
        }
        
        input[type="number"]:focus {
            border-color: #4CAF50;
            outline: none;
        }
        
        button.action-btn {
            padding: 8px 16px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            font-size: 14px;
            width: 100%;
        }
        
        button.action-btn:hover {
            background: #1976D2;
        }
        
        button.secondary-btn {
            padding: 8px 16px;
            background: #95a5a6;
            color: white;
            border: none;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            font-size: 14px;
            width: 100%;
            margin-top: 5px;
        }
        
        button.secondary-btn:hover {
            background: #7f8c8d;
        }
        
        button.danger-btn {
            background: #e74c3c;
            margin-top: 10px;
        }
        
        button.danger-btn:hover {
            background: #c0392b;
        }
        
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 13px;
            line-height: 1.4;
        }
        
        .feedback.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .feedback.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .feedback.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        label {
            font-weight: 600;
            color: #555;
            font-size: 13px;
        }
        
        .hint {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }
        
        /* Mobile responsive */
        @media (max-width: 900px) {
            #mainContainer {
                flex-direction: column;
                max-width: 600px;
            }
            
            #sidebar {
                width: 100%;
                max-height: none;
                order: 2;
            }
            
            #canvasArea {
                order: 1;
            }
            
            canvas {
                width: 100%;
                max-width: 500px;
            }
        }
    </style>
</head>
<body>
    <div id="mainContainer">
        <!-- Sidebar with Controls -->
        <div id="sidebar">
            <h1>üìê Grid Explorer</h1>
            
            <div class="section">
                <div class="section-title">Select Mode</div>
                <div id="modeButtons">
                    <button class="mode-btn active" onclick="setMode(1)">1. Plot a Point</button>
                    <button class="mode-btn" onclick="setMode(2)">2. Find the Point</button>
                    <button class="mode-btn" onclick="setMode(3)">3. Check for Line</button>
                </div>
                <button class="secondary-btn danger-btn" onclick="clearGrid()">üóëÔ∏è Clear Grid</button>
            </div>
            
            <!-- Mode 1: Plot Point -->
            <div id="panel1" class="panel active section">
                <div class="section-title">Plot Coordinates</div>
                <div class="input-group">
                    <div class="point-input">
                        <label>X:</label>
                        <input type="number" id="p1x" min="-10" max="10" value="3" step="1">
                        <label>Y:</label>
                        <input type="number" id="p1y" min="-10" max="10" value="4" step="1">
                    </div>
                    <button class="action-btn" onclick="plotPoint()">Plot Point</button>
                </div>
                <div id="feedback1" class="feedback info">Enter coordinates between -10 and 10</div>
            </div>
            
            <!-- Mode 2: Quiz -->
            <div id="panel2" class="panel section">
                <div class="section-title">Identify the Point</div>
                <button class="action-btn" onclick="generateQuizPoint()">Generate New Point</button>
                
                <div id="quizControls" style="display: none; margin-top: 10px;">
                    <div class="input-group">
                        <div class="point-input">
                            <label>X:</label>
                            <input type="number" id="quizX" min="-10" max="10" step="1">
                            <label>Y:</label>
                            <input type="number" id="quizY" min="-10" max="10" step="1">
                        </div>
                        <button class="action-btn" onclick="checkQuiz()">Submit Answer</button>
                    </div>
                </div>
                <div id="feedback2" class="feedback info">Click "Generate New Point" to start</div>
            </div>
            
            <!-- Mode 3: Line Check -->
            <div id="panel3" class="panel section">
                <div class="section-title">Check Collinearity</div>
                <p class="hint">Enter 2 or 3 points. If collinear, a line with arrows will appear.</p>
                
                <div class="input-group">
                    <div class="point-input">
                        <strong>Point 1:</strong>
                        <input type="number" id="l1x" min="-10" max="10" step="1" placeholder="x">
                        <input type="number" id="l1y" min="-10" max="10" step="1" placeholder="y">
                    </div>
                    <div class="point-input">
                        <strong>Point 2:</strong>
                        <input type="number" id="l2x" min="-10" max="10" step="1" placeholder="x">
                        <input type="number" id="l2y" min="-10" max="10" step="1" placeholder="y">
                    </div>
                    <div class="point-input">
                        <strong>Point 3:</strong>
                        <input type="number" id="l3x" min="-10" max="10" step="1" placeholder="x (opt)">
                        <input type="number" id="l3y" min="-10" max="10" step="1" placeholder="y (opt)">
                    </div>
                </div>
                
                <button class="action-btn" onclick="checkLine()">Check for Line</button>
                <div id="feedback3" class="feedback info">Enter at least 2 points</div>
            </div>
        </div>
        
        <!-- Canvas Area -->
        <div id="canvasArea">
            <canvas id="gridCanvas" width="600" height="600"></canvas>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gridCanvas');
        const ctx = canvas.getContext('2d');
        const SIZE = 600;
        const CENTER = SIZE / 2;
        const SCALE = SIZE / 20; // 30 pixels per unit
        const MAX = 10;
        
        let quizPoint = null;
        let currentMode = 1;
        
        function toCanvas(x, y) {
            return {
                x: CENTER + (x * SCALE),
                y: CENTER - (y * SCALE)
            };
        }
        
        function drawArrowhead(x, y, angle, size = 12, color = '#000') {
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(
                x - size * Math.cos(angle - Math.PI / 6),
                y - size * Math.sin(angle - Math.PI / 6)
            );
            ctx.lineTo(
                x - size * Math.cos(angle + Math.PI / 6),
                y - size * Math.sin(angle + Math.PI / 6)
            );
            ctx.closePath();
            ctx.fill();
        }
        
        function drawArrowLine(p1, p2, color = '#000', width = 3) {
            ctx.strokeStyle = color;
            ctx.lineWidth = width;
            ctx.lineCap = 'round';
            
            ctx.beginPath();
            ctx.moveTo(p1.x, p1.y);
            ctx.lineTo(p2.x, p2.y);
            ctx.stroke();
            
            const angle1 = Math.atan2(p2.y - p1.y, p2.x - p1.x);
            const angle2 = angle1 + Math.PI;
            
            drawArrowhead(p2.x, p2.y, angle1, 12, color);
            drawArrowhead(p1.x, p1.y, angle2, 12, color);
        }
        
        function drawGridPoint(x, y, color = '#e74c3c', label = null) {
            const pos = toCanvas(x, y);
            
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.arc(pos.x, pos.y, 10, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            if (label) {
                ctx.fillStyle = '#000';
                ctx.font = 'bold 16px Arial';
                ctx.textAlign = 'left';
                ctx.textBaseline = 'bottom';
                ctx.fillText(label, pos.x + 12, pos.y - 8);
            }
        }
        
        function drawGrid() {
            ctx.clearRect(0, 0, SIZE, SIZE);
            
            // Light grid lines
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            
            for (let i = -MAX; i <= MAX; i++) {
                if (i === 0) continue;
                
                const pos = toCanvas(i, 0);
                ctx.beginPath();
                ctx.moveTo(pos.x, 0);
                ctx.lineTo(pos.x, SIZE);
                ctx.stroke();
                
                const posY = toCanvas(0, i);
                ctx.beginPath();
                ctx.moveTo(0, posY.y);
                ctx.lineTo(SIZE, posY.y);
                ctx.stroke();
            }
            
            // Thick axes with arrows
            ctx.strokeStyle = '#2c3e50';
            drawArrowLine(toCanvas(-MAX, 0), toCanvas(MAX, 0), '#2c3e50', 4);
            drawArrowLine(toCanvas(0, -MAX), toCanvas(0, MAX), '#2c3e50', 4);
            
            // Axis labels
            ctx.fillStyle = '#2c3e50';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'top';
            
            for (let i = -MAX; i <= MAX; i++) {
                if (i === 0) continue;
                const pos = toCanvas(i, 0);
                ctx.fillText(i.toString(), pos.x, CENTER + 8);
            }
            
            ctx.textAlign = 'right';
            ctx.textBaseline = 'middle';
            for (let i = -MAX; i <= MAX; i++) {
                if (i === 0) continue;
                const pos = toCanvas(0, i);
                ctx.fillText(i.toString(), CENTER - 8, pos.y);
            }
            
            ctx.fillText('0', CENTER - 12, CENTER + 12);
            
            ctx.font = 'bold 18px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('X', toCanvas(MAX, 0).x - 20, toCanvas(MAX, 0).y - 20);
            ctx.fillText('Y', toCanvas(0, MAX).x + 15, toCanvas(0, MAX).y + 15);
        }
        
        function setMode(mode) {
            currentMode = mode;
            
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.querySelectorAll('.panel').forEach(panel => {
                panel.classList.remove('active');
            });
            document.getElementById(`panel${mode}`).classList.add('active');
            
            drawGrid();
            
            if (mode !== 2) {
                quizPoint = null;
            }
        }
        
        function clearGrid() {
            drawGrid();
            // Reset feedback messages
            document.getElementById('feedback1').className = 'feedback info';
            document.getElementById('feedback1').textContent = 'Enter coordinates between -10 and 10';
            document.getElementById('feedback2').className = 'feedback info';
            document.getElementById('feedback2').textContent = 'Click "Generate New Point" to start';
            document.getElementById('feedback3').className = 'feedback info';
            document.getElementById('feedback3').textContent = 'Enter at least 2 points';
            // Hide quiz controls
            document.getElementById('quizControls').style.display = 'none';
            quizPoint = null;
        }
        
        function plotPoint() {
            const x = parseFloat(document.getElementById('p1x').value);
            const y = parseFloat(document.getElementById('p1y').value);
            const feedback = document.getElementById('feedback1');
            
            if (isNaN(x) || isNaN(y) || x < -MAX || x > MAX || y < -MAX || y > MAX) {
                feedback.className = 'feedback error';
                feedback.textContent = '‚ùå Please enter valid coordinates between -10 and 10.';
                return;
            }
            
            drawGrid();
            drawGridPoint(x, y, '#e74c3c', `(${x}, ${y})`);
            
            feedback.className = 'feedback success';
            feedback.textContent = `‚úÖ Plotted at (${x}, ${y})`;
        }
        
        function generateQuizPoint() {
            quizPoint = {
                x: Math.floor(Math.random() * 21) - 10,
                y: Math.floor(Math.random() * 21) - 10
            };
            
            drawGrid();
            drawGridPoint(quizPoint.x, quizPoint.y, '#3498db');
            
            document.getElementById('quizControls').style.display = 'block';
            document.getElementById('quizX').value = '';
            document.getElementById('quizY').value = '';
            document.getElementById('quizX').focus();
            
            const fb = document.getElementById('feedback2');
            fb.className = 'feedback info';
            fb.textContent = 'üîç Enter the coordinates of the blue dot';
        }
        
        function checkQuiz() {
            if (!quizPoint) return;
            
            const x = parseFloat(document.getElementById('quizX').value);
            const y = parseFloat(document.getElementById('quizY').value);
            const fb = document.getElementById('feedback2');
            
            if (isNaN(x) || isNaN(y)) {
                fb.className = 'feedback error';
                fb.textContent = '‚ùå Please enter both coordinates';
                return;
            }
            
            if (x === quizPoint.x && y === quizPoint.y) {
                drawGrid();
                drawGridPoint(quizPoint.x, quizPoint.y, '#27ae60', `(${quizPoint.x}, ${quizPoint.y})`);
                fb.className = 'feedback success';
                fb.textContent = `‚úÖ Correct! (${quizPoint.x}, ${quizPoint.y})`;
            } else {
                fb.className = 'feedback error';
                fb.textContent = `‚ùå Incorrect. Try again!`;
            }
        }
        
        function checkLine() {
            const p1 = {
                x: parseFloat(document.getElementById('l1x').value),
                y: parseFloat(document.getElementById('l1y').value)
            };
            const p2 = {
                x: parseFloat(document.getElementById('l2x').value),
                y: parseFloat(document.getElementById('l2y').value)
            };
            const p3 = {
                x: parseFloat(document.getElementById('l3x').value),
                y: parseFloat(document.getElementById('l3y').value)
            };
            
            const fb = document.getElementById('feedback3');
            
            if ([p1, p2].some(p => isNaN(p.x) || isNaN(p.y) || p.x < -MAX || p.x > MAX || p.y < -MAX || p.y > MAX)) {
                fb.className = 'feedback error';
                fb.textContent = '‚ùå Points 1 & 2 must be valid (-10 to 10)';
                return;
            }
            
            const hasP3 = !isNaN(p3.x) && !isNaN(p3.y) && 
                          p3.x >= -MAX && p3.x <= MAX && 
                          p3.y >= -MAX && p3.y <= MAX;
            
            drawGrid();
            
            drawGridPoint(p1.x, p1.y, '#9b59b6', 'P1');
            drawGridPoint(p2.x, p2.y, '#9b59b6', 'P2');
            if (hasP3) drawGridPoint(p3.x, p3.y, '#9b59b6', 'P3');
            
            const intersections = getBoundaryIntersections(p1, p2);
            
            if (hasP3) {
                const crossProduct = (p2.x - p1.x) * (p3.y - p1.y) - (p3.x - p1.x) * (p2.y - p1.y);
                const isCollinear = Math.abs(crossProduct) < 0.0001;
                
                if (isCollinear) {
                    if (intersections.length >= 2) {
                        const start = toCanvas(intersections[0].x, intersections[0].y);
                        const end = toCanvas(intersections[1].x, intersections[1].y);
                        drawArrowLine(start, end, '#2980b9', 5);
                    }
                    fb.className = 'feedback success';
                    fb.textContent = `‚úÖ Collinear! Forms a straight line.`;
                } else {
                    fb.className = 'feedback error';
                    fb.textContent = `‚ùå Not collinear.`;
                }
            } else {
                if (intersections.length >= 2) {
                    const start = toCanvas(intersections[0].x, intersections[0].y);
                    const end = toCanvas(intersections[1].x, intersections[1].y);
                    drawArrowLine(start, end, '#2980b9', 5);
                }
                fb.className = 'feedback info';
                fb.textContent = `‚ÑπÔ∏è Two points define a line (shown).`;
            }
        }
        
        function getBoundaryIntersections(p1, p2) {
            const points = [];
            
            if (Math.abs(p2.x - p1.x) < 0.0001) {
                points.push({x: p1.x, y: -MAX});
                points.push({x: p1.x, y: MAX});
                return points;
            }
            
            const m = (p2.y - p1.y) / (p2.x - p1.x);
            const b = p1.y - m * p1.x;
            
            let y = m * (-MAX) + b;
            if (y >= -MAX && y <= MAX) points.push({x: -MAX, y: y});
            
            y = m * MAX + b;
            if (y >= -MAX && y <= MAX) points.push({x: MAX, y: y});
            
            if (Math.abs(m) > 0.0001) {
                let x = (-MAX - b) / m;
                if (x >= -MAX && x <= MAX) points.push({x: x, y: -MAX});
                
                x = (MAX - b) / m;
                if (x >= -MAX && x <= MAX) points.push({x: x, y: MAX});
            }
            
            return points.filter((p, i, arr) => 
                arr.findIndex(q => 
                    Math.abs(q.x - p.x) < 0.001 && Math.abs(q.y - p.y) < 0.001
                ) === i
            );
        }
        
        drawGrid();
    </script>
</body>
</html>
